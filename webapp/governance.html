<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BROTHERHOOD - 거버넌스</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="additional.css">
    <link rel="stylesheet" href="input-fix.css">
  
    <link rel="stylesheet" href="governance-theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <meta name="theme-color" content="#000000">
</head>
<body>
    
    <!-- 헤더 -->
    <header class="header">
        <div class="container">
            <div class="mobile-header-content">
                <!-- 시스템 탭 헤더 -->
                <div class="mobile-header-tab active" id="mobile-header-system">
                    <div class="mobile-header-system">
                        <div class="mobile-system-title">
                            <i class="fas fa-code"></i>
                            <span>시스템</span>
                        </div>
                    </div>
                </div>

                <!-- 거버넌스 탭 헤더 -->
                <div class="mobile-header-tab" id="mobile-header-governance">
                    <div class="mobile-header-governance">
                        <div class="mobile-governance-title">
                            <i class="fas fa-university"></i>
                            <span>거버넌스</span>
                        </div>
                    </div>
                </div>

                <!-- 포크 탭 헤더 -->
                <div class="mobile-header-tab" id="mobile-header-fork">
                    <div class="mobile-header-fork">
                        <div class="mobile-fork-title">
                            <i class="fas fa-code-branch"></i>
                            <span>포크</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </header>

    <!-- 메인 컨테이너 -->
    <div class="main-container">
        <div class="container">
            <!-- 네비게이션 -->
            <nav class="nav-tabs">
                <button class="tab-btn back-btn" onclick="navigateToMain();">
                    <i class="fas fa-arrow-left"></i>
                    <span>메인</span>
                </button>
                <button class="tab-btn active" data-tab="system">
                    <i class="fas fa-code"></i>
                    <span>시스템</span>
                </button>
                <button class="tab-btn" data-tab="governance">
                    <i class="fas fa-university"></i>
                    <span>거버넌스</span>
                </button>
                <button class="tab-btn" data-tab="fork">
                    <i class="fas fa-code-branch"></i>
                    <span>포크</span>
                </button>
            </nav>

            <!-- 시스템 탭 -->
            <div id="system" class="tab-content active">
                <div class="governance-container">
                    <!-- 시스템 헤더 -->
                    <div class="governance-header">
                        <h2><i class="fas fa-code"></i> 시스템 구조</h2>
                        <p class="governance-subtitle">BROTHERHOOD 코드베이스</p>
                    </div>

                    <div class="system-container">
                        <div class="file-browser-simple">
                            <div class="file-list" id="systemFileList">
                                <!-- 파일 목록이 동적으로 생성됩니다 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 거버넌스 탭 -->
            <div id="governance" class="tab-content">
                <div class="governance-container">
                    <!-- 거버넌스 헤더 -->
                    <div class="governance-header">
                        <h2><i class="fas fa-university"></i> 거버넌스 과정</h2>
                        <p class="governance-subtitle">제안부터 병합까지의 민주적 의사결정</p>
                    </div>

                    <!-- 거버넌스 서브메뉴 -->
                    <div class="dashboard-filter-nav">
                        <div class="dashboard-filter-scroll">
                            <button class="dashboard-filter-btn active" data-gov-sub="proposal" onclick="window.governanceApp.switchGovernanceSubTab('proposal')">
                                <i class="fas fa-lightbulb"></i>
                                제안단계
                            </button>
                            <button class="dashboard-filter-btn" data-gov-sub="collab" onclick="window.governanceApp.switchGovernanceSubTab('collab')">
                                <i class="fas fa-vote-yea"></i>
                                본투표단계
                            </button>
                            <button class="dashboard-filter-btn" data-gov-sub="evaluation" onclick="window.governanceApp.switchGovernanceSubTab('evaluation')">
                                <i class="fas fa-star"></i>
                                평가단계
                            </button>
                        </div>
                    </div>

                    <!-- 제안단계 탭 -->
                    <div id="gov-proposal" class="governance-sub-content active">
                        <div class="proposal-container">
                            <div class="collab-header-simple">
                                <h3><i class="fas fa-lightbulb"></i> 제안 단계</h3>
                                <button class="btn-primary collab-create-btn" onclick="window.governanceApp.openProposalCreateModal()">
                                    <i class="fas fa-plus"></i>
                                    새 제안 (1B)
                                </button>
                            </div>

                            <!-- 제안 단계 서브탭 -->
                            <div class="proposal-subtabs">
                                <button class="proposal-subtab-btn active" data-proposal-filter="new" onclick="window.governanceApp.switchProposalFilter('new')">
                                    <i class="fas fa-sparkles"></i>
                                    신규제안
                                </button>
                                <button class="proposal-subtab-btn" data-proposal-filter="waiting" onclick="window.governanceApp.switchProposalFilter('waiting')">
                                    <i class="fas fa-clock"></i>
                                    협업대기
                                </button>
                            </div>

                            <div class="collab-list" id="proposalList">
                                <!-- 제안 카드들이 동적으로 생성됩니다 -->
                            </div>
                        </div>
                    </div>

                    <!-- 본투표단계 탭 -->
                    <div id="gov-collab" class="governance-sub-content">
                        <div class="collab-container" id="collabContainer">
                            <!-- 본투표단계 내용이 동적으로 생성됩니다 -->
                            <div class="collab-empty-state">
                                <i class="fas fa-vote-yea"></i>
                                <p>현재 진행 중인 본투표 안건이 없습니다.</p>
                                <p class="collab-empty-subtitle">제안 단계의 투표대기 안건이 자동으로 진입합니다.</p>
                            </div>
                        </div>
                    </div>

                    <!-- 평가단계 탭 -->
                    <div id="gov-evaluation" class="governance-sub-content">
                        <div class="evaluation-container">
                            <div class="collab-header-simple">
                                <h3><i class="fas fa-star"></i> 평가 단계</h3>
                            </div>

                            <!-- 평가 단계 서브탭 -->
                            <div class="proposal-subtabs">
                                <button class="proposal-subtab-btn active" data-evaluation-filter="evaluating" onclick="window.governanceApp.switchEvaluationFilter('evaluating')">
                                    <i class="fas fa-comments"></i>
                                    평가중
                                </button>
                                <button class="proposal-subtab-btn" data-evaluation-filter="completed" onclick="window.governanceApp.switchEvaluationFilter('completed')">
                                    <i class="fas fa-check-circle"></i>
                                    완료됨
                                </button>
                            </div>

                            <div class="collab-list" id="evaluationList">
                                <!-- 평가 카드들이 동적으로 생성됩니다 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 포크 탭 -->
            <div id="fork" class="tab-content">
                <div class="governance-container">
                    <!-- 포크 헤더 -->
                    <div class="governance-header">
                        <h2><i class="fas fa-code-branch"></i> 내 작업공간</h2>
                        <p class="governance-subtitle">개인 포크 및 개발 환경</p>
                    </div>

                    <div class="forkspace-container">
                        <div class="forkspace-header-simple">
                            <h3><i class="fas fa-code-branch"></i> 포크 목록</h3>
                            <button class="btn-primary fork-create-btn" onclick="window.governanceApp.createPersonalFork()">
                                <i class="fas fa-plus"></i>
                                새 포크
                            </button>
                        </div>

                        <div class="fork-list" id="forkList">
                            <!-- 포크 목록이 동적으로 생성됩니다 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 제안 생성 모달 -->
    <div id="proposalCreateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-lightbulb"></i> 새 제안 생성</h3>
                <button class="modal-close" onclick="window.governanceApp.closeProposalCreateModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="proposalTitle">제목</label>
                    <input type="text" id="proposalTitle" class="form-control" placeholder="제안 제목을 입력하세요">
                </div>
                <div class="form-group">
                    <label for="proposalDescription">설명</label>
                    <textarea id="proposalDescription" class="form-control" rows="5" placeholder="제안 내용을 상세히 설명해주세요"></textarea>
                </div>
                <div class="form-group">
                    <label for="proposalLabels">라벨 (쉼표로 구분)</label>
                    <input type="text" id="proposalLabels" class="form-control" placeholder="예: 개선, UI/UX, 보안">
                </div>
                <div class="proposal-cost-info">
                    <i class="fas fa-info-circle"></i>
                    <span>제안 생성 비용: 1B (모금함으로 이동)</span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="window.governanceApp.closeProposalCreateModal()">취소</button>
                <button class="btn-primary" onclick="window.governanceApp.createProposal()">
                    <i class="fas fa-plus"></i> 생성하기 (1B)
                </button>
            </div>
        </div>
    </div>

    <!-- 제안 상세 모달 -->
    <div id="proposalDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="proposalDetailTitle">제안 상세</h3>
                <button class="modal-close" onclick="window.governanceApp.closeProposalDetailModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="proposalDetailContent">
                <!-- 동적으로 생성됩니다 -->
            </div>
        </div>
    </div>

    <!-- PR 생성 모달 -->
    <div id="prCreateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="prCreateTitle">PR 생성</h3>
                <button class="modal-close" onclick="window.governanceApp.closePRCreateModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="prTitle">PR 제목</label>
                    <input type="text" id="prTitle" class="form-control" placeholder="PR 제목을 입력하세요">
                </div>
                <div class="form-group">
                    <label for="prDescription">변경 사항 설명</label>
                    <textarea id="prDescription" class="form-control" rows="5" placeholder="어떤 변경사항이 있는지 상세히 설명해주세요"></textarea>
                </div>
                <div class="form-group">
                    <label for="prFiles">변경된 파일들</label>
                    <textarea id="prFiles" class="form-control" rows="3" placeholder="변경된 파일 목록 (예: src/index.js, styles.css)"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="window.governanceApp.closePRCreateModal()">취소</button>
                <button class="btn-primary" onclick="window.governanceApp.createPR()">
                    <i class="fas fa-code-branch"></i> PR 생성
                </button>
            </div>
        </div>
    </div>

    <!-- 피드백 모달 -->
    <div id="feedbackModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-comment"></i> 피드백 작성</h3>
                <button class="modal-close" onclick="window.governanceApp.closeFeedbackModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="feedbackContent">피드백 내용</label>
                    <textarea id="feedbackContent" class="form-control" rows="5" placeholder="적용된 변경사항에 대한 피드백을 작성해주세요"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="window.governanceApp.closeFeedbackModal()">취소</button>
                <button class="btn-primary" onclick="window.governanceApp.createFeedback()">
                    <i class="fas fa-paper-plane"></i> 피드백 등록
                </button>
            </div>
        </div>
    </div>

    
    <script src="ime-fix.js"></script>
    <script src="profile-photo.js"></script>
    <script src="app.js"></script>
    <script src="governance-app.js"></script>
    <script src="config.js"></script>
    
    <!-- 서비스 워커 등록 -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(function(registration) {
                        console.log('Service Worker registered:', registration);
                    })
                    .catch(function(error) {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }

        // 메인 페이지로 이동하는 함수
        function navigateToMain() {
            window.location.href = '/';
        }

        // 거버넌스 앱 초기화
        window.governanceApp = new GovernanceApp();
    </script>

</body>
</html> 