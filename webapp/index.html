<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Î∞±Ïïº ÌîÑÎ°úÌÜ†ÏΩú - ÌÉàÏ§ëÏïôÌôî Í∏∞Ïó¨Í∏∞Î∞ò Î∏îÎ°ùÏ≤¥Ïù∏ ÏÇ¨ÌöåÏãúÏä§ÌÖú</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="additional.css">
    <link rel="stylesheet" href="input-fix.css">
    <link rel="stylesheet" href="firebase-auth.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <meta name="theme-color" content="#000000">
    
    <!-- Ìó§Îçî -->
    <header class="header">
        <div class="container">
            <div class="mobile-header-content">
                <!-- ÎåÄÏãúÎ≥¥Îìú ÌÉ≠ Ìó§Îçî -->
                <div class="mobile-header-tab active" id="mobile-header-dashboard">
                    <div class="mobile-header-dashboard">
                        <div class="mobile-dashboard-title">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>ÎåÄÏãúÎ≥¥Îìú</span>
                        </div>
                        <div class="connection-status" id="connectionStatus">üü° Ïó∞Í≤∞ Ï§ë...</div>
                    </div>
                </div>

                <!-- ÏßÄÍ∞ë ÌÉ≠ Ìó§Îçî -->
                <div class="mobile-header-tab" id="mobile-header-wallet">
                    <div class="mobile-header-wallet">
                        <div class="mobile-wallet-title">
                            <i class="fas fa-wallet"></i>
                            <span>ÎÇ¥ ÏßÄÍ∞ë</span>
                        </div>
                        <div class="mobile-wallet-actions">
                            <!-- ÏÉàÎ°úÍ≥†Ïπ® Î≤ÑÌäº Ï†úÍ±∞Îê® -->
                        </div>
                    </div>
                </div>

                <!-- DAO ÌÉ≠ Ìó§Îçî -->
                <div class="mobile-header-tab" id="mobile-header-dao">
                    <div class="mobile-header-dao">
                        <div class="mobile-dao-title">
                            <i class="fas fa-users"></i>
                            <span>DAO</span>
                        </div>
                    </div>
                </div>



                <!-- P2P ÌÉ≠ Ìó§Îçî -->
                <div class="mobile-header-tab" id="mobile-header-p2p">
                    <div class="mobile-header-p2p">
                        <div class="mobile-p2p-title">
                            <i class="fas fa-comments"></i>
                            <span>P2P</span>
                        </div>
                        <div class="mobile-p2p-actions">
                            <button class="mobile-p2p-btn" id="mobileP2PActionBtn" onclick="window.dapp.showAddContact()">
                                <i class="fas fa-user-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>



    <!-- Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà -->
    <div class="main-container">
        <div class="container">
            <!-- ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
            <nav class="nav-tabs">
                <button class="tab-btn active" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>ÎåÄÏãúÎ≥¥Îìú</span>
                    <div class="tab-notification-badge" id="dashboardNotificationBadge" style="display: none;"></div>
                </button>
                <button class="tab-btn" data-tab="wallet">
                    <i class="fas fa-wallet"></i>
                    <span>ÏßÄÍ∞ë</span>
                    <div class="tab-notification-badge" id="walletNotificationBadge" style="display: none;"></div>
                </button>
                <button class="tab-btn" data-tab="dao">
                    <i class="fas fa-users"></i>
                    <span>DAO</span>
                </button>
                <button class="tab-btn" data-tab="p2p">
                    <i class="fas fa-comments"></i>
                    <span>P2P</span>
                    <div class="tab-notification-badge" id="p2pNotificationBadge" style="display: none;"></div>
                </button>
            </nav>

            <!-- ÎåÄÏãúÎ≥¥Îìú ÌÉ≠ -->
            <div id="dashboard" class="tab-content active">
                <!-- ÎåÄÏãúÎ≥¥Îìú Ïπ¥Îìú ÌïÑÌÑ∞ Î©îÎâ¥ -->
                <div class="dashboard-filter-nav">
                    <div class="dashboard-filter-scroll">
                        <button class="dashboard-filter-btn active" data-card="all" onclick="window.dapp.switchDashboardFilter('all')">
                            <i class="fas fa-th-large"></i>
                            Ï†ÑÏ≤¥ Ïπ¥Îìú
                        </button>
                        <button class="dashboard-filter-btn" data-card="profile" onclick="window.dapp.switchDashboardFilter('profile')">
                            <i class="fas fa-user-circle"></i>
                            ÎÇ¥ ÌîÑÎ°úÌïÑ
                        </button>
                        <button class="dashboard-filter-btn" data-card="balance" onclick="window.dapp.switchDashboardFilter('balance')">
                            <i class="fas fa-coins"></i>
                            ÌÜ†ÌÅ∞ ÏûîÏï°
                        </button>

                        <!-- ÏÜåÏÜç DAO Î©îÎâ¥ Ï†úÍ±∞Îê® - ÌÜ†ÌÅ∞ Î≥¥Ïú†Îüâ Ïπ¥ÎìúÏóê ÌÜµÌï© -->

                        <button class="dashboard-filter-btn" data-card="validator" onclick="window.dapp.switchDashboardFilter('validator')">
                            <i class="fas fa-shield-alt"></i>
                            Í≤ÄÏ¶ùÏûê Ï∞∏Ïó¨
                        </button>
                        <button class="dashboard-filter-btn" data-card="protocol" onclick="window.dapp.switchDashboardFilter('protocol')">
                            <i class="fas fa-book"></i>
                            ÌîÑÎ°úÌÜ†ÏΩú Í∞úÏöî
                        </button>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <!-- Í∞úÏù∏ ÏÉÅÌÉú Ïπ¥Îìú -->
                    <div class="status-card" data-card="profile">
                        <div class="card-header">
                            <h3><i class="fas fa-user-circle"></i> ÎÇ¥ ÌîÑÎ°úÌïÑ</h3>
                        </div>
                        <div class="card-content">
                            <div class="profile-section">
                                <div class="profile-photo-section">
                                    <div class="profile-photo-container">
                                        <div class="profile-photo" id="profilePhoto">
                                            <i class="fas fa-user"></i>
                                        </div>
                                        <button class="profile-photo-edit" onclick="window.dapp.openProfileSettingsModal()" title="ÌîÑÎ°úÌïÑ ÏÑ§Ï†ï">
                                            <i class="fas fa-cog"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="personal-info">
                                    <div class="info-row">
                                        <label>ÏïÑÏù¥Îîî</label>
                                        <span id="userId" style="font-weight: 600;">ÎØ∏ÏÑ§Ï†ï</span>
                                    </div>
                                    <div class="info-row">
                                        <label>Ïù¥Î¶Ñ</label>
                                        <span id="userName">ÎØ∏ÏÑ§Ï†ï</span>
                                    </div>
                                    <!-- ÏÉùÎÖÑÏõîÏùº Ìï≠Î™© Ï†úÍ±∞Îê® -->
                                    <div class="info-row">
                                        <label>ÏÉÅÌÉúÎ©îÏãúÏßÄ</label>
                                        <span id="userStatusMessage" style="color: var(--text-secondary); font-style: italic;">ÏÉÅÌÉúÎ©îÏãúÏßÄÎ•º ÏÑ§Ï†ïÌï¥Î≥¥ÏÑ∏Ïöî</span>
                                    </div>
                                </div>

                                <div class="profile-actions">
                                    <button class="btn-secondary comm-btn" onclick="window.dapp.showCommunicationAddressModal()" id="commAddressButton" style="display: none;">
                                        <i class="fas fa-phone"></i>
                                        ÌÜµÏã†Ï£ºÏÜå
                                    </button>
                                    <button class="btn-secondary p2p-btn" onclick="window.dapp.switchToP2P()" id="p2pButton" style="display: none;">
                                        <i class="fas fa-comments"></i>
                                        P2P ÌÜµÏã†
                                    </button>
                                    <span class="badge" id="verificationBadge">Ïù∏Ï¶ù ÎåÄÍ∏∞</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÌÜ†ÌÅ∞ Î≥¥Ïú†Îüâ Ïπ¥Îìú -->
                    <div class="balance-card" data-card="balance">
                        <div class="card-header">
                            <h3><i class="fas fa-coins"></i> ÌÜ†ÌÅ∞ Î≥¥Ïú†Îüâ</h3>
                        </div>
                        <div class="card-content">
                            <div class="balance-section">
                                <div class="balance-grid">
                                    <div class="balance-item">
                                        <div class="balance-label">B-Token (ÌôîÌèê)</div>
                                        <div class="balance-value" id="bTokenBalance">0 B</div>
                                        <!-- Í∏∞Ïó¨ Í¥ÄÎ†® Î©îÏãúÏßÄ Ï†úÍ±∞Îê® -->
                                        <button class="token-action-btn transfer-btn" onclick="window.dapp.goToTokenTransfer()" id="bTokenTransferButton" style="display: none;">
                                            <i class="fas fa-paper-plane"></i>
                                            Ï†ÑÏÜ°ÌïòÍ∏∞
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ÏÜåÏÜç DAO ÌÜ†Í∏Ä ÏÑπÏÖò -->
                            <div class="dao-toggle-section">
                        <div class="dao-toggle-header" onclick="window.dapp.toggleMyDAOCard()">
                            <div class="dao-toggle-content">
                                <i class="fas fa-history"></i>
                                <span>Í∏∞Ïó¨ÎÇ¥Ïó≠ ÌôïÏù∏ÌïòÍ∏∞</span>
                                <div class="notification-badge" id="daoToggleNotificationBadge" style="display: none;"></div>
                        </div>
                            <i class="fas fa-chevron-down dao-toggle-icon" id="daoToggleIcon"></i>
                        </div>
                        <div class="dao-card-content" id="daoCardContent" style="display: none;">
                            <div class="my-dao-list" id="myDAOList">
                                <!-- ÏÜåÏÜç DAO Î™©Î°ùÏù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- ÎÇòÏùò DAO Ïπ¥Îìú Ï†úÍ±∞Îê® - ÌÜ†ÌÅ∞ Î≥¥Ïú†Îüâ Ïπ¥ÎìúÏóê ÌÜµÌï© -->



                    <!-- Í≤ÄÏ¶ùÏûê Ï∞∏Ïó¨ Ïπ¥Îìú -->
                    <div class="validator-card" data-card="validator">
                        <div class="card-header">
                            <h3><i class="fas fa-shield-alt"></i> ÎÑ§Ìä∏ÏõåÌÅ¨ Í≤ÄÏ¶ùÏûê</h3>
                        </div>
                        <div class="card-content">
                            <div class="validator-info">
                                <p class="validator-description">
                                    ÎÑ§Ìä∏ÏõåÌÅ¨ Í≤ÄÏ¶ùÏóê Ï∞∏Ïó¨ÌïòÏó¨ Î≥¥ÏÉÅÏùÑ Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî.
                                </p>
                                <div class="validator-stats">
                                    <div class="stat-item">
                                        <span class="stat-label">Í≤ÄÏ¶ùÏûê ÏàòÏàòÎ£å ÌíÄ</span>
                                        <span class="stat-value" id="validatorPoolMain">- B</span>
                                    </div>
                                                            <div class="stat-item">
                            <span class="stat-label">Î∏îÎ°ùÏÉùÏÑ± Ïù∏ÏÑºÌã∞Î∏å</span>
                            <span class="stat-value">0.25B</span>
                        </div>
                                </div>
                                <div class="validator-actions">
                                    <button class="btn-primary validator-join-btn" onclick="window.dapp.navigateToValidatorDAO()">
                                        <i class="fas fa-users"></i> Í≤ÄÏ¶ùÏûê Ï∞∏Ïó¨ÌïòÍ∏∞
                                    </button>
                                    <button class="btn-support validator-sponsor-btn" onclick="window.dapp.showValidatorSponsorModal()">
                                        <i class="fas fa-heart"></i> Í≤ÄÏ¶ùÏûê ÌíÄ ÌõÑÏõêÌïòÍ∏∞
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÌîÑÎ°úÌÜ†ÏΩú Í∞úÏöî Ïπ¥Îìú -->
                    <div class="protocol-overview-card" data-card="protocol">
                        <div class="card-header">
                            <h3><i class="fas fa-book"></i> Î∞±Ïïº ÌîÑÎ°úÌÜ†ÏΩú</h3>
                        </div>
                        <div class="card-content">
                            <div class="protocol-info">
                                <p class="protocol-description">
                                    ÌîÑÎ°úÌÜ†ÏΩúÏùò Ï≤†ÌïôÍ≥º Íµ¨Ï°∞Ïóê ÎåÄÌï¥ ÏïåÏïÑÎ≥¥ÏÑ∏Ïöî.
                                </p>
                                <button class="btn-primary protocol-overview-btn" onclick="window.open('https://github.com/baekya-protocol/baekya-protocol/blob/main/docs/protocol_overview.md', '_blank')">
                                    <i class="fas fa-external-link-alt"></i> ÌîÑÎ°úÌÜ†ÏΩú Í∞úÏöî Î≥¥Í∏∞
                                </button>
                                

                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÏßÄÍ∞ë ÌÉ≠ -->
            <div id="wallet" class="tab-content">
                <div class="wallet-container">
                    <div class="wallet-header">
                        <h2><i class="fas fa-wallet"></i> ÎÇ¥ ÏßÄÍ∞ë</h2>
                        <div class="wallet-actions">
                            <!-- ÏÉàÎ°úÍ≥†Ïπ® Î≤ÑÌäº Ï†úÍ±∞Îê® -->
                        </div>
                    </div>

                    <!-- ÏïÑÏù¥Îîî ÏÉùÏÑ±/Î°úÍ∑∏Ïù∏ ÏÑπÏÖò -->
                    <div class="biometric-section" id="biometricSection">
                        <div class="biometric-card">
                            <div class="card-header">
                                <h3><i class="fas fa-user-circle"></i> ÏïÑÏù¥Îîî ÏÉùÏÑ±/Î°úÍ∑∏Ïù∏</h3>
                            </div>
                            <div class="card-content">
                                <p class="description">Î∞±Ïïº ÌîÑÎ°úÌÜ†ÏΩú Ï∞∏Ïó¨Î•º ÏúÑÌï¥ ÏïÑÏù¥ÎîîÎ•º ÏÉùÏÑ±ÌïòÍ±∞ÎÇò Î°úÍ∑∏Ïù∏ÌïòÏÑ∏Ïöî.</p>
                                <div class="biometric-options">
                                    <button class="biometric-btn" onclick="startUserAuth()">
                                        <i class="fas fa-user-plus"></i>
                                        <span>ÏãúÏûëÌïòÍ∏∞</span>
                                    </button>
                                </div>
                                <div class="security-notice">
                                    <i class="fas fa-shield-alt"></i>
                                    <span>1Í∏∞Í∏∞ 1Í≥ÑÏ†ï Ï†ïÏ±ÖÏù¥ Ï†ÅÏö©Îê©ÎãàÎã§</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÏßÄÍ∞ë Ï†ïÎ≥¥ ÏÑπÏÖò -->
                    <div class="wallet-info" id="walletInfo" style="display: none;">
                        <!-- ÌÜ†ÌÅ∞ ÏûîÏï° Í∞úÏöî -->
                        <div class="balance-overview">
                            <div class="balance-card-large">
                                <div class="balance-header">
                                    <h3>B-Token (ÌôîÌèê)</h3>
                                    <div class="balance-main" id="bTokenMain">0 B</div>
                                </div>
                                <div class="mining-info">
                                    <!-- Í∏∞Ïó¨ Í¥ÄÎ†® Î©îÏãúÏßÄ Ï†úÍ±∞Îê® -->
                            </div>
                            

                            </div>
                        </div>

                        <!-- ÎÇ¥ Ï£ºÏÜå Ïπ¥Îìú -->
                        <div class="balance-card-large address-card">
                            <div class="address-toggle-header" onclick="window.dapp.toggleAddressCard()">
                                <div class="address-toggle-content">
                                    <i class="fas fa-address-card"></i>
                                    <span>ÎÇ¥ Ï£ºÏÜå ÌôïÏù∏ÌïòÍ∏∞</span>
                                </div>
                                <i class="fas fa-chevron-down address-toggle-icon" id="addressToggleIcon"></i>
                            </div>
                            <div class="address-card-content" id="addressCardContent" style="display: none;">
                                <div class="address-section">

                                    <div class="address-info">
                                        <div class="address-label">ÌÜµÏã† Ï£ºÏÜå</div>
                                        <div class="address-container">
                                            <div class="address-value" id="myCommAddress">-</div>
                                            <button class="copy-btn" onclick="window.dapp.copyToClipboard('myCommAddress', 'ÌÜµÏã†Ï£ºÏÜå')" title="ÌÜµÏã†Ï£ºÏÜå Î≥µÏÇ¨">
                                                <i class="fas fa-copy"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="qr-section">
                                    <div class="qr-container">
                                        <canvas id="qrCanvas" width="150" height="150"></canvas>
                                    </div>
                                    <div class="qr-controls">
                                        <button class="btn-secondary" onclick="window.dapp.downloadQR()">
                                            <i class="fas fa-download"></i> QR Ï†ÄÏû•
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Í±∞Îûò Í∏∞Îä• -->
                        <div class="transaction-section">
                            <div class="transaction-card">
                                <div class="card-header">
                                    <h3><i class="fas fa-paper-plane"></i> ÌÜ†ÌÅ∞ Ï†ÑÏÜ°</h3>
                                </div>
                                <div class="card-content">
                                    <div class="transaction-fee-info">
                                        <div class="fee-notice">
                                            <i class="fas fa-info-circle"></i>
                                            <span>Ìä∏ÎûúÏû≠ÏÖò ÏàòÏàòÎ£å: <strong>0.1%</strong></span>
                                        </div>

                                    </div>
                                    <form id="transferForm">
                                        <div class="form-group">
                                            <label for="recipientAddress">Î∞õÎäî Ï£ºÏÜå (ÌÜµÏã†Ï£ºÏÜå ÎòêÎäî ÏïÑÏù¥Îîî)</label>
                                            <div class="address-input-group">
                                            <input type="text" id="recipientAddress" placeholder="010-1234-5678 ÎòêÎäî ÏïÑÏù¥Îîî">
                                                <!-- QR Ïä§Ï∫î Î≤ÑÌäºÏùÄ Î™®Î∞îÏùº Ïï±ÏóêÏÑúÎßå ÏÇ¨Ïö© Í∞ÄÎä• -->
                                                <div class="web-qr-notice">
                                                    <i class="fas fa-mobile-alt"></i>
                                                    <span>QR Ïä§Ï∫îÏùÄ Ïï±ÏóêÏÑú Ïù¥Ïö© Í∞ÄÎä•</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="transferAmount">Ï†ÑÏÜ°Îüâ (B-Token)</label>
                                            <div class="amount-input">
                                                <input type="number" id="transferAmount" placeholder="0" min="0" step="0.01">
                                                <span class="token-suffix">B</span>
                                            </div>
                                            <div class="amount-summary" id="transferSummary" style="display: none;">
                                                <div class="summary-row">
                                                    <span>Ï†ÑÏÜ°Îüâ:</span>
                                                    <span id="transferAmountDisplay">0 B</span>
                                                </div>
                                                <div class="summary-row">
                                                    <span>ÏàòÏàòÎ£å (0.1%):</span>
                                                    <span id="transferFeeDisplay">0 B</span>
                                                </div>
                                                <div class="summary-row total">
                                                    <span>Ï¥ù ÌïÑÏöî:</span>
                                                    <span id="totalAmountDisplay">0.001 B</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="transferMemo">Î©îÎ™® (ÏÑ†ÌÉùÏÇ¨Ìï≠)</label>
                                            <input type="text" id="transferMemo" placeholder="Í±∞Îûò Î©îÎ™®">
                                        </div>
                                        <button type="submit" class="btn-primary">
                                            <i class="fas fa-paper-plane"></i> Ï†ÑÏÜ°
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Í±∞ÎûòÎÇ¥Ïó≠ ÏÑπÏÖò -->
                        <div class="transaction-history-section">
                            <div class="transaction-history-card">
                                <div class="card-header">
                                    <div class="card-header-left">
                                        <h3><i class="fas fa-history"></i> Í±∞ÎûòÎÇ¥Ïó≠</h3>
                                        <div class="transaction-notification-badge" id="transactionNotificationBadge" style="display: none;"></div>
                                    </div>
                                    <div class="card-header-right">
                                        <button class="btn-secondary btn-small" onclick="window.dapp.refreshTransactionHistory()" title="ÏÉàÎ°úÍ≥†Ïπ®">
                                            <i class="fas fa-sync-alt"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div class="transaction-filter-tabs">
                                        <button class="transaction-filter-tab active" data-filter="all" onclick="window.dapp.filterTransactionHistory('all')">
                                            Ï†ÑÏ≤¥
                                        </button>
                                        <button class="transaction-filter-tab" data-filter="sent" onclick="window.dapp.filterTransactionHistory('sent')">
                                            Î≥¥ÎÇ∏ Í±∞Îûò
                                        </button>
                                        <button class="transaction-filter-tab" data-filter="received" onclick="window.dapp.filterTransactionHistory('received')">
                                            Î∞õÏùÄ Í±∞Îûò
                                        </button>
                                    </div>
                                    <div class="transaction-list" id="transactionList">
                                        <div class="empty-state">
                                            <i class="fas fa-history"></i>
                                            <p>Í±∞ÎûòÎÇ¥Ïó≠Ïù¥ ÏóÜÏäµÎãàÎã§</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DAO ÌÉ≠ -->
            <div id="dao" class="tab-content">
                <div class="dao-container">
                    <div class="dao-header">
                        <h2><i class="fas fa-users"></i> DAO Ïª®ÏÜåÏãúÏóÑ</h2>
                    </div>



                    <!-- DAO Í≤ÄÏÉâÏ∞Ω -->
                    <div class="dao-search-section">
                        <div class="search-input-wrapper">
                            <input type="text" id="daoSearchInput" placeholder="DAO Ïù¥Î¶ÑÏúºÎ°ú Í≤ÄÏÉâ..." onkeyup="window.dapp.searchDAOs(this.value)">
                            <button class="clear-search-btn" onclick="window.dapp.clearDAOSearch()" style="display: none;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>

                    <div class="dao-grid" id="daoGrid">
                        <!-- DAO Ïπ¥ÎìúÎì§Ïù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                    </div>
                </div>
            </div>


            <div id="p2p" class="tab-content">
                <div class="p2p-container">
                    <div class="p2p-header">
                        <h2><i class="fas fa-wifi"></i> P2P ÌÜµÏã†</h2>
                        <div class="p2p-actions">
                            <button class="btn-secondary" onclick="window.dapp.showAddContact()" title="Ïó∞ÎùΩÏ≤ò Ï∂îÍ∞Ä">
                                <i class="fas fa-user-plus"></i> Ïó∞ÎùΩÏ≤ò Ï∂îÍ∞Ä
                            </button>
                            <button class="btn-secondary" onclick="window.dapp.showCreateGroupChat()" title="Í∑∏Î£πÏ±ÑÌåÖ ÏÉùÏÑ±">
                                <i class="fas fa-users"></i> Í∑∏Î£πÏ±ÑÌåÖ
                            </button>
                        </div>
                    </div>

                    <!-- P2P ÌÉ≠ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
                    <div class="p2p-tab-navigation">
                        <button class="p2p-nav-tab active" data-tab="contacts" onclick="window.dapp.switchP2PTab('contacts')">
                                    <i class="fas fa-address-book"></i>
                                    <span>Ïó∞ÎùΩÏ≤ò</span>
                                </button>
                        <button class="p2p-nav-tab" data-tab="chats" onclick="window.dapp.switchP2PTab('chats')">
                                    <i class="fas fa-comments"></i>
                                    <span>Ï±ÑÌåÖ</span>
                                </button>
                        <button class="p2p-nav-tab" data-tab="public" onclick="window.dapp.switchP2PTab('public')">
                                    <i class="fas fa-globe"></i>
                                    <span>Í≥µÍ∞ú</span>
                                </button>
                            </div>
                        
                    <!-- Ïó∞ÎùΩÏ≤ò ÌôîÎ©¥ -->
                    <div id="contactsScreen" class="p2p-screen active">
                    
                    <!-- Ïó∞ÎùΩÏ≤ò Í≤ÄÏÉâÏ∞Ω -->
                    <div class="p2p-search-section">
                        <div class="search-input-wrapper">
                            <input type="text" id="contactSearchInput" placeholder="Ïó∞ÎùΩÏ≤ò Í≤ÄÏÉâ..." oninput="window.dapp.searchContacts(this.value)">
                            <button class="clear-search-btn" onclick="window.dapp.clearContactSearch()" style="display: none;" title="Í≤ÄÏÉâ Ï¥àÍ∏∞Ìôî">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>


                    
                    <div class="contact-list-full" id="contactsList">
                                <!-- Ïó∞ÎùΩÏ≤ò Î™©Î°ùÏù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                            </div>
                        </div>
                        
                    <!-- Ï±ÑÌåÖ ÌôîÎ©¥ -->
                    <div id="chatsScreen" class="p2p-screen">
                    
                    <!-- Ï±ÑÌåÖÎ∞© Í≤ÄÏÉâÏ∞Ω -->
                    <div class="p2p-search-section">
                        <div class="search-input-wrapper">
                            <input type="text" id="chatSearchInput" placeholder="Ï±ÑÌåÖÎ∞© Í≤ÄÏÉâ..." oninput="window.dapp.searchChats(this.value)">
                            <button class="clear-search-btn" onclick="window.dapp.clearChatSearch()" style="display: none;" title="Í≤ÄÏÉâ Ï¥àÍ∏∞Ìôî">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Ï±ÑÌåÖ ÌïÑÌÑ∞ Î©îÎâ¥Î∞î -->
                    <div class="chat-filter-nav dao-nav-filter">
                        <div class="dao-filter-scroll">
                            <button class="dao-filter-btn active" onclick="window.dapp.filterChats('all')" data-filter="all">
                                <i class="fas fa-comments"></i>
                                <span>Ï†ÑÏ≤¥</span>
                            </button>
                            <button class="dao-filter-btn" onclick="window.dapp.filterChats('individual')" data-filter="individual">
                                <i class="fas fa-user"></i>
                                <span>Í∞úÏù∏</span>
                            </button>
                            <button class="dao-filter-btn" onclick="window.dapp.filterChats('group')" data-filter="group">
                                <i class="fas fa-users"></i>
                                <span>Îã®Ï≤¥</span>
                            </button>
                            <button class="dao-filter-btn" onclick="window.dapp.filterChats('public')" data-filter="public">
                                <i class="fas fa-globe"></i>
                                <span>Í≥µÍ∞ú</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="chat-list-full" id="chatsList">
                                <!-- Ï±ÑÌåÖÎ∞© Î™©Î°ùÏù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                        </div>
                    </div>
                    
                    <!-- Í≥µÍ∞ú Ï±ÑÌåÖ ÌôîÎ©¥ -->
                    <div id="publicScreen" class="p2p-screen">
                        <!-- Í≥µÍ∞ú Ï±ÑÌåÖÎ∞© Í≤ÄÏÉâ Î∞è ÏÉùÏÑ± -->
                        <div class="public-chat-header">
                            <div class="public-search-section">
                                <div class="search-input-wrapper">
                                    <input type="text" id="publicChatSearchInput" placeholder="Í≥µÍ∞ú Ï±ÑÌåÖÎ∞© Í≤ÄÏÉâ..." oninput="window.dapp.searchPublicChats(this.value)">
                                    <button class="clear-search-btn" onclick="window.dapp.clearPublicChatSearch()" style="display: none;" title="Í≤ÄÏÉâ Ï¥àÍ∏∞Ìôî">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <button class="create-public-chat-btn" onclick="window.dapp.showCreatePublicChatModal()">
                                <i class="fas fa-plus"></i>
                                <span>Ï±ÑÌåÖÎ∞© ÎßåÎì§Í∏∞</span>
                            </button>
                        </div>


                        
                        <!-- Í≥µÍ∞ú Ï±ÑÌåÖÎ∞© Î™©Î°ù -->
                        <div class="public-chat-list" id="publicChatsList">
                            <!-- Í≥µÍ∞ú Ï±ÑÌåÖÎ∞© Î™©Î°ùÏù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                        </div>
                    </div>
                    
                <!-- Í∞úÎ≥Ñ Ï±ÑÌåÖ ÌôîÎ©¥ -->
                <div id="chatScreen" class="p2p-screen chat-screen">
                    <div class="chat-header">
                        <button class="chat-back-btn" onclick="window.dapp.backToP2PList()">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div class="chat-user-info" onclick="window.dapp.showChatRoomInfo()">
                            <div class="chat-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="chat-details">
                                <h3 id="chatUserName">ÏÇ¨Ïö©Ïûê</h3>
                                <span id="chatUserStatus">Ïò®ÎùºÏù∏</span>
                            </div>
                        </div>
                        <div class="chat-actions">
                            <button class="chat-action-btn" onclick="window.dapp.confirmCall(window.dapp.currentChatId)" title="ÏùåÏÑ±ÌÜµÌôî">
                                <i class="fas fa-phone"></i>
                            </button>
                            <button class="chat-action-btn" onclick="window.dapp.confirmVideoCall(window.dapp.currentChatId)" title="ÏòÅÏÉÅÌÜµÌôî">
                                <i class="fas fa-video"></i>
                            </button>
                            <button class="chat-action-btn" onclick="window.dapp.openChatMenu()" title="Ï±ÑÌåÖÎ∞© Î©îÎâ¥">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <!-- Ï±ÑÌåÖ Î©îÏãúÏßÄÎì§Ïù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                    </div>
                    <div class="chat-input-area">
                        <div class="chat-input-container">
                            <div class="input-attachments">
                                <button class="attachment-btn" onclick="window.dapp.openAttachmentMenu()" title="Ï≤®Î∂Ä">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <div class="input-main">
                                <input type="text" id="messageInput" placeholder="Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." onkeypress="if(event.key==='Enter') window.dapp.sendMessage()">
                                <div class="input-extras">
                                    <!-- Ïù¥Î™®ÏßÄ Î≤ÑÌäº Ï†úÍ±∞Îê®
                                    <button class="input-extra-btn" onclick="window.dapp.openEmojiPicker()" title="Ïù¥Î™®ÏßÄ">
                                        <i class="fas fa-smile"></i>
                                    </button>
                                    -->
                                    <!-- ÏùåÏÑ±Î©îÏãúÏßÄ Î≤ÑÌäº Ï†úÍ±∞Îê®
                                    <button class="input-extra-btn" onclick="window.dapp.toggleVoiceMessage()" title="ÏùåÏÑ±Î©îÏãúÏßÄ">
                                        <i class="fas fa-microphone"></i>
                                    </button>
                                    -->
                                </div>
                            </div>
                            <button class="send-btn" onclick="window.dapp.sendMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                    <!-- Ïù∏Ï¶ù ÏöîÍµ¨ ÏÉÅÌÉú (ÎπÑÏù∏Ï¶ù ÏÇ¨Ïö©ÏûêÏö©) -->
                    <div class="auth-required" id="p2pAuthRequired" style="display: none;">
                        <i class="fas fa-lock"></i>
                        <h3>P2P ÌÜµÏã†ÏùÑ ÏúÑÌï¥ Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§</h3>
                        <button class="btn-primary" onclick="document.querySelector('[data-tab=wallet]').click()">
                            <i class="fas fa-wallet"></i>
                            ÏßÄÍ∞ëÏúºÎ°ú Ïù¥Îèô
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Î™®Îã¨Îì§ -->

    <!-- Ï±ÑÌåÖÎ∞© Î©îÎâ¥ Î™®Îã¨ -->
    <div id="chatMenuModal" class="modal">
        <div class="modal-content chat-menu-content">
            <div class="modal-header">
                <h3><i class="fas fa-cog"></i> Ï±ÑÌåÖÎ∞© ÏÑ§Ï†ï</h3>
                <button class="modal-close" onclick="window.dapp.closeChatMenu()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="chat-menu-grid">
                    <button class="chat-menu-item" onclick="window.dapp.showNotificationSettings()">
                        <i class="fas fa-bell"></i>
                        <span>ÏïåÎ¶ºÏÑ§Ï†ï</span>
                    </button>
                    <button class="chat-menu-item" onclick="window.dapp.showChatSchedule()">
                        <i class="fas fa-calendar"></i>
                        <span>ÏùºÏ†ï</span>
                    </button>
                    <button class="chat-menu-item" onclick="window.dapp.showChatAnnouncement()">
                        <i class="fas fa-bullhorn"></i>
                        <span>Í≥µÏßÄÏÇ¨Ìï≠</span>
                    </button>
                    <button class="chat-menu-item" onclick="window.dapp.showChatVote()">
                        <i class="fas fa-vote-yea"></i>
                        <span>Ìà¨Ìëú</span>
                    </button>
                    <button class="chat-menu-item" onclick="window.dapp.showChatPhotos()">
                        <i class="fas fa-images"></i>
                        <span>ÏÇ¨ÏßÑ/ÎèôÏòÅÏÉÅ</span>
                    </button>
                    <button class="chat-menu-item" onclick="window.dapp.showChatFiles()">
                        <i class="fas fa-file"></i>
                        <span>ÌååÏùº</span>
                    </button>
                    <button class="chat-menu-item" onclick="window.dapp.showChatLinks()">
                        <i class="fas fa-link"></i>
                        <span>ÎßÅÌÅ¨</span>
                    </button>
                    <button class="chat-menu-item" onclick="window.dapp.showChatSearch()">
                        <i class="fas fa-search"></i>
                        <span>ÎåÄÌôîÍ≤ÄÏÉâ</span>
                    </button>
                    <button class="chat-menu-item danger" onclick="window.dapp.deleteChatHistory()">
                        <i class="fas fa-trash"></i>
                        <span>Ï±ÑÌåÖÎ∞© ÏÇ≠Ï†úÌïòÍ∏∞</span>
                    </button>
                    <button class="chat-menu-item danger" onclick="window.dapp.leaveChatRoom()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Ï±ÑÌåÖÎ∞© ÎÇòÍ∞ÄÍ∏∞</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ï≤®Î∂Ä Î©îÎâ¥ Î™®Îã¨ -->
    <div id="attachmentMenuModal" class="modal">
        <div class="modal-content attachment-menu-content">
            <div class="modal-header">
                <h3><i class="fas fa-paperclip"></i> Ï≤®Î∂ÄÌïòÍ∏∞</h3>
                <button class="modal-close" onclick="window.dapp.closeAttachmentMenu()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="attachment-menu-grid">
                    <button class="attachment-menu-item" onclick="window.dapp.attachPhoto()">
                        <i class="fas fa-camera"></i>
                        <span>ÏÇ¨ÏßÑ</span>
                    </button>
                    <button class="attachment-menu-item" onclick="window.dapp.attachVideo()">
                        <i class="fas fa-video"></i>
                        <span>ÎèôÏòÅÏÉÅ</span>
                    </button>
                    <button class="attachment-menu-item" onclick="window.dapp.attachFile()">
                        <i class="fas fa-file"></i>
                        <span>ÌååÏùº</span>
                    </button>
                    <button class="attachment-menu-item" onclick="window.dapp.attachContact()">
                        <i class="fas fa-user"></i>
                        <span>Ïó∞ÎùΩÏ≤ò</span>
                    </button>
                    <button class="attachment-menu-item" onclick="window.dapp.attachLocation()">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>ÏúÑÏπò</span>
                    </button>
                    <button class="attachment-menu-item" onclick="window.dapp.attachMoney()">
                        <i class="fas fa-coins"></i>
                        <span>ÏÜ°Í∏à</span>
                    </button>
                    <button class="attachment-menu-item" onclick="window.dapp.attachVote()">
                        <i class="fas fa-vote-yea"></i>
                        <span>Ìà¨ÌëúÎßåÎì§Í∏∞</span>
                    </button>
                    <button class="attachment-menu-item" onclick="window.dapp.attachSchedule()">
                        <i class="fas fa-calendar-plus"></i>
                        <span>ÏùºÏ†ïÏû°Í∏∞</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÎåÄÌôîÏ†ïÎ≥¥ Î™®Îã¨ -->
    <div id="chatInfoModal" class="modal">
        <div class="modal-content chat-info-content">
            <div class="modal-header">
                <h3><i class="fas fa-info-circle"></i> ÎåÄÌôîÏ†ïÎ≥¥</h3>
                <button class="modal-close" onclick="window.dapp.closeChatInfo()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="chat-info-section">
                    <div class="chat-info-profile">
                        <div class="chat-info-avatar" id="chatInfoAvatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="chat-info-details">
                            <h4 id="chatInfoName">ÏÇ¨Ïö©Ïûê</h4>
                            <p id="chatInfoStatus">Ïò®ÎùºÏù∏</p>
                        </div>
                    </div>
                    
                    <div class="chat-info-stats">
                        <div class="chat-stat-item">
                            <span class="stat-label">Ï¥ù Î©îÏãúÏßÄ</span>
                            <span class="stat-value" id="totalMessages">127</span>
                        </div>
                        <div class="chat-stat-item">
                            <span class="stat-label">Ï≤´ ÎåÄÌôî</span>
                            <span class="stat-value" id="firstChatDate">2024.01.15</span>
                        </div>
                        <div class="chat-stat-item">
                            <span class="stat-label">Í≥µÏú†Îêú ÌååÏùº</span>
                            <span class="stat-value" id="sharedFiles">8</span>
                        </div>
                    </div>

                    <div class="chat-info-actions">
                        <button class="chat-info-action-btn" onclick="window.dapp.blockUser()">
                            <i class="fas fa-ban"></i>
                            <span>Ï∞®Îã®ÌïòÍ∏∞</span>
                        </button>
                        <button class="chat-info-action-btn" onclick="window.dapp.reportUser()">
                            <i class="fas fa-flag"></i>
                            <span>Ïã†Í≥†ÌïòÍ∏∞</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ïù¥Î™®ÏßÄ ÌîºÏª§ Î™®Îã¨ -->
    <div id="emojiPickerModal" class="modal">
        <div class="modal-content emoji-picker-content">
            <div class="modal-header">
                <h3><i class="fas fa-smile"></i> Ïù¥Î™®ÏßÄ</h3>
                <button class="modal-close" onclick="window.dapp.closeEmojiPicker()">&times;</button>

            </div>
            <div class="modal-body">
                <div class="emoji-grid" id="emojiGrid">
                    <!-- Ïù¥Î™®ÏßÄÎì§Ïù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                </div>
            </div>
        </div>
    </div>

    <!-- DAO ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Î™®Îã¨ -->
    <div id="daoDetailModal" class="modal">
        <div class="modal-content dao-detail-content">
            <div class="modal-header">
                <h3 id="daoDetailTitle">DAO ÏÉÅÏÑ∏ Ï†ïÎ≥¥</h3>
                <button class="modal-close" onclick="window.dapp.closeDAODetailModal()">&times;</button>
            </div>
            
            <!-- DAO ÏÉÅÏÑ∏ Ï†ïÎ≥¥ ÏΩòÌÖêÏ∏† -->
            <div class="dao-detail-body">
                <!-- Í∏∞Ïó¨ÎÇ¥Ïó≠ ÌÉ≠ -->
                <div id="daoDetailContribution" class="dao-detail-tab-content active">
                    <div class="contribution-list" id="daoContributionList">
                        <!-- Í∏∞Ïó¨ÎÇ¥Ïó≠Ïù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="biometricModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÏïÑÏù¥Îîî Ïù∏Ï¶ù ÏßÑÌñâ Ï§ë</h3>
                <button class="modal-close" onclick="window.dapp.closeBiometricModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="biometric-progress">
                    <div class="step active" id="stepFingerprint">
                        <i class="fas fa-user-check"></i>
                        <span>ÏïÑÏù¥Îîî ÌôïÏù∏</span>
                    </div>
                    <div class="step" id="stepComplete">
                        <i class="fas fa-check-circle"></i>
                        <span>ÏôÑÎ£å</span>
                    </div>
                </div>
                <div class="progress-message" id="progressMessage">
                    ÏïÑÏù¥Îîî Ïù∏Ï¶ùÏùÑ ÏãúÏûëÌï©ÎãàÎã§...
                </div>
            </div>
        </div>
    </div>

    <!-- OP Í≤ÄÌÜ† Î™®Îã¨ -->
    <div id="opReviewModal" class="modal op-review-modal">
        <div class="modal-content op-review-content">
            <div class="modal-header">
                <h3><i class="fas fa-shield-alt"></i> OP Í≤ÄÌÜ† ÏãúÏä§ÌÖú</h3>
                <button class="modal-close" onclick="window.dapp.closeOPReviewModal()">&times;</button>
            </div>
            <div class="op-review-notice">
                <span>Í≤ÄÌÜ† ÏùòÍ≤¨ÏùÄ Í≥µÍ∞úÎêòÎ©∞ Î∂àÏÑ±Ïã§ ÏûëÏÑ± Ïãú ÌÉÑÌïµÏÇ¨Ïú†Í∞Ä Îê† Ïàò ÏûàÏäµÎãàÎã§.</span>
            </div>
            <div class="modal-body">
                <!-- OP Í≤ÄÌÜ† ÌÉ≠ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
                <div class="op-review-nav">
                    <button class="op-review-tab active" data-tab="my-dao" onclick="window.dapp.switchOPReviewTab('my-dao')">
                        <i class="fas fa-gavel"></i>
                        <span>ÎÇ¥ DAO Í≤ÄÌÜ†</span>
                        <small>OP Í∂åÌïúÏúºÎ°ú ÏïàÍ±¥ Í≤∞Ï†ï</small>
                    </button>
                    <button class="op-review-tab" data-tab="ops" onclick="window.dapp.switchOPReviewTab('ops')">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Ops Í≤ÄÌÜ†</span>
                        <small>Ïù¥ÏùòÏã†Ï≤≠ Í∏∞Í∞Ñ (2Ïùº)</small>
                    </button>
                    <button class="op-review-tab" data-tab="final" onclick="window.dapp.switchOPReviewTab('final')">
                        <i class="fas fa-crown"></i>
                        <span>ÏµúÏ¢Ö Í≤ÄÌÜ†</span>
                        <small>TOP-OP Ï†ÑÏö© (OpsDAO OPÎßå)</small>
                    </button>
                </div>

                <!-- OP Í≤ÄÌÜ† ÏΩòÌÖêÏ∏† -->
                <div class="op-review-content-area">
                    <div id="op-review-content">
                        <!-- Í∞Å ÌÉ≠Ïùò ÏΩòÌÖêÏ∏†Í∞Ä ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê©ÎãàÎã§ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ï†úÏïàÌïòÍ∏∞ Î™®Îã¨ -->
    <div id="createProposalModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÏÉà Ï†úÏïà ÏûëÏÑ±</h3>
                <button class="modal-close" onclick="window.dapp.closeCreateProposalModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="createProposalForm">
                    <!-- Ï†úÏïà Ïú†Ìòï ÏÑ†ÌÉù -->
                    <div class="form-group">
                        <label>Ï†úÏïà Ïú†Ìòï</label>
                        <div class="proposal-type-selector">
                            <div class="proposal-type-option">
                                <input type="radio" id="generalProposal" name="proposalType" value="general" checked onchange="window.dapp.handleProposalTypeChange()">
                                <label for="generalProposal">ÏùºÎ∞òÏ†úÏïà</label>
                            </div>
                            <div class="proposal-type-option">
                                <input type="radio" id="daoCreationProposal" name="proposalType" value="dao_creation" onchange="window.dapp.handleProposalTypeChange()">
                                <label for="daoCreationProposal">DAOÏÉùÏÑ±Ï†úÏïà</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÏùºÎ∞òÏ†úÏïà ÏñëÏãù -->
                    <div id="generalProposalForm" class="proposal-form-section">
                    <div class="form-group">
                        <label for="proposalDAO">ÎåÄÏÉÅ DAO</label>
                        <select id="proposalDAO" required onchange="window.dapp.handleDAOSelection()">
                            <option value="">DAOÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                            <!-- ÏÜåÏÜç DAO Î™©Î°ùÏù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                        </select>
                    </div>
                    <!-- OP ÌÉÑÌïµÏïà Ï≤¥ÌÅ¨Î∞ïÏä§ (DAO ÏÑ†ÌÉù Ïãú ÌëúÏãú) -->
                    <div class="form-group" id="impeachmentOption" style="display: none;">
                        <div class="impeachment-checkbox-simple">
                                <label>
                                    <input type="checkbox" id="isImpeachmentProposal" onchange="window.dapp.handleImpeachmentToggle()">
                                    OP ÌÉÑÌïµÏïà
                                </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="proposalTitle">Ï†úÏïà Ï†úÎ™©</label>
                        <input type="text" id="proposalTitle" placeholder="Ï†úÏïà Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
                    </div>
                    <div class="form-group">
                        <label for="proposalDescription">Ï†úÏïà ÎÇ¥Ïö©</label>
                        <textarea id="proposalDescription" rows="6" placeholder="Ï†úÏïà ÎÇ¥Ïö©ÏùÑ ÏÉÅÏÑ∏Ìûà ÏûëÏÑ±ÌïòÏÑ∏Ïöî" required></textarea>
                    </div>
                        
                        <!-- Î™®Í∏àÍ∏∞Í∞Ñ ÏÑ§Ï†ï -->
                    <div class="form-group">
                            <label for="proposalFundingEndDate">Î™®Í∏à Ï¢ÖÎ£åÏùº</label>
                            <input type="date" id="proposalFundingEndDate" required>
                            <small>ÎãπÏùºÎ∂ÄÌÑ∞ 14Ïùº ÌõÑÍπåÏßÄ ÏÑ†ÌÉù Í∞ÄÎä•Ìï©ÎãàÎã§</small>
                        </div>
                        
                                                 <script>
                             // Î™®Í∏à Ï¢ÖÎ£åÏùº ÎÇ†Ïßú Ï†úÌïú ÏÑ§Ï†ï Î∞è Ï¥àÍ∏∞ ÏàòÏàòÎ£å ÏÑ§Ï†ï
                             document.addEventListener('DOMContentLoaded', function() {
                                 const today = new Date();
                                 const maxDate = new Date(today);
                                 maxDate.setDate(today.getDate() + 14);
                                 
                                 const fundingEndDateInput = document.getElementById('proposalFundingEndDate');
                                 if (fundingEndDateInput) {
                                     fundingEndDateInput.min = today.toISOString().split('T')[0];
                                     fundingEndDateInput.max = maxDate.toISOString().split('T')[0];
                                     
                                     // Í∏∞Î≥∏Í∞íÏùÑ 7Ïùº ÌõÑÎ°ú ÏÑ§Ï†ï
                                     const defaultDate = new Date(today);
                                     defaultDate.setDate(today.getDate() + 7);
                                     fundingEndDateInput.value = defaultDate.toISOString().split('T')[0];
                                 }
                                 
                                 // Ï¥àÍ∏∞ ÏàòÏàòÎ£å ÌëúÏãú (50BÏùò 1% = 0.5B)
                                 const feeDisplay = document.getElementById('proposalFeeAmount');
                                 if (feeDisplay) {
                                     feeDisplay.textContent = '0.50 B (1%)';
                                 }
                             });
                         </script>
                        
                        <div class="form-group">
                            <label for="proposalStake">Ï†úÏïàÏûê Î™®Í∏àÏï° B-Token</label>
                            <input type="number" id="proposalStake" min="50" step="0.1" placeholder="ÏµúÏÜå 50B" required oninput="window.dapp.updateProposalFee()">
                            <small>Ï†úÏïàÏùÑ ÏúÑÌï¥ ÏµúÏÜå 50B Ïù¥ÏÉÅÏùò Î™®Í∏àÏï°ÏùÑ ÏÑ§Ï†ïÌï¥Ïïº Ìï©ÎãàÎã§</small>
                    </div>
                    <!-- Ï≤®Î∂ÄÌååÏùº ÏÑπÏÖò -->
                    <div class="form-group">
                        <label for="proposalAttachments">Ï≤®Î∂ÄÌååÏùº</label>
                        <div class="file-upload-area" onclick="document.getElementById('proposalFileInput').click()">
                            <div class="file-upload-content">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>ÌÅ¥Î¶≠ÌïòÏó¨ ÌååÏùºÏùÑ ÏÑ†ÌÉùÌïòÍ±∞ÎÇò ÎìúÎûòÍ∑∏ÌïòÏó¨ ÏóÖÎ°úÎìúÌïòÏÑ∏Ïöî</p>
                                <small>ÏßÄÏõê ÌòïÏãù: PDF, DOC, DOCX, TXT, JPG, PNG (ÏµúÎåÄ 10MB)</small>
                            </div>
                            <input type="file" id="proposalFileInput" multiple accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png" style="display: none;" onchange="window.dapp.handleProposalFileUpload(this)">
                        </div>
                        <div class="uploaded-files-list" id="proposalUploadedFiles"></div>
                    </div>
                    <div class="proposal-fee-info">
                        <div class="fee-notice">
                            <i class="fas fa-info-circle"></i>
                                <span>Ï†úÏïà ÏàòÏàòÎ£å: <strong id="proposalFeeAmount">0.50 B (1%)</strong></span>
                        </div>

                    </div>
                    <div class="proposal-requirements">
                        <h4 id="requirementsTitle">Ï†úÏïà ÏöîÍµ¨ÏÇ¨Ìï≠</h4>
                        <ul id="requirementsList">
                                <li>Î™®Í∏àÎêú Í∏àÏï°ÏùÄ Ìà¨ÌëúÌÜµÍ≥ºÏãú Ïã§ÌñâÍ≥ºÏ†ïÏóê Ïì∞Ïù¥Î©∞, ÎÇ®ÏùÄ Í∏àÏï°ÏùÄ ÏãúÏä§ÌÖúÏóê Î∂ÑÎ∞∞Îê©ÎãàÎã§.</li>
                        </ul>
                        <!-- ÌÉÑÌïµÏïà ÌäπÎ≥Ñ ÏöîÍµ¨ÏÇ¨Ìï≠ (ÌÉÑÌïµÏïà ÏÑ†ÌÉù Ïãú ÌëúÏãú) -->
                        <ul id="impeachmentRequirementsList" style="display: none;">
                                <li class="impeachment-special">DAO ÎÇ¥ Ï†ÑÏ≤¥ Íµ¨ÏÑ±ÏõêÏùò <strong>10%</strong> ÎòêÎäî <strong>ÏµúÏÜå 30B</strong> Ï§ë Îçî ÌÅ∞ Í∞íÏùò B-tokenÏù¥ Î™®Ïù¥Î©¥ Ìà¨Ìëú ÏßÑÏûÖ (ÏùºÎ∞òÏ†úÏïà: 1%)</li>
                            <li>2Ï£º ÎÇ¥ Ìà¨Ìëú ÏßÑÏûÖ Ïã§Ìå®Ïãú Ï†úÏïà Î∞è Îã¥Î≥¥ ÏÜåÍ∞Å</li>
                            <li class="impeachment-special">Ìà¨Ìëú Ïãú Ï†ïÏ°±Ïàò <strong>60%</strong> ÌïÑÏöî (ÏùºÎ∞òÏ†úÏïà: 40%)</li>
                            <li class="impeachment-special">Ï∞¨ÏÑ± ÎπÑÏú® <strong>60%</strong> Ïù¥ÏÉÅ ÌïÑÏöî (ÏùºÎ∞òÏ†úÏïà: 50%)</li>
                            <li>Ìà¨Ìëú ÌÜµÍ≥ºÏãú Îã¥Î≥¥ Î∞òÌôò, Ïã§Ìå®Ïãú Îã¥Î≥¥ ÏÜåÍ∞Å</li>
                        </ul>
                        </div>
                    </div>
                    
                    <!-- DAOÏÉùÏÑ±Ï†úÏïà ÏñëÏãù -->
                    <div id="daoCreationProposalForm" class="proposal-form-section" style="display: none;">
                        <!-- Í∏∞Î≥∏ Ï†ïÎ≥¥ ÏÑπÏÖò -->
                        <div class="dao-form-section">
                            <h4><i class="fas fa-info-circle"></i> Í∏∞Î≥∏ Ï†ïÎ≥¥</h4>
                            <div class="form-group">
                                <label for="daoTitle">DAO Ïù¥Î¶Ñ</label>
                                <input type="text" id="daoTitle" placeholder="Ïòà: Innovation DAO" required>
                            </div>
                            <div class="form-group">
                                <label for="daoDescription">DAO ÏÑ§Î™Ö</label>
                                <textarea id="daoDescription" placeholder="DAOÏùò Î™©Ï†ÅÍ≥º Ïó≠Ìï†ÏùÑ ÏÑ§Î™ÖÌï¥Ï£ºÏÑ∏Ïöî..." rows="3" required></textarea>
                            </div>
                        </div>

                        <!-- Ï∞∏Ïó¨ ÏïàÎÇ¥ ÏÑπÏÖò -->
                        <div class="dao-form-section">
                            <h4><i class="fas fa-users"></i> Ï∞∏Ïó¨ ÏïàÎÇ¥</h4>
                            <div class="form-group">
                                <label for="daoParticipationGuide">Ï∞∏Ïó¨ÌïòÍ∏∞ ÏïàÎÇ¥ ÎÇ¥Ïö©</label>
                                <textarea id="daoParticipationGuide" placeholder="ÏÇ¨Ïö©ÏûêÍ∞Ä 'Ï∞∏Ïó¨ÌïòÍ∏∞' Î≤ÑÌäºÏùÑ ÎàåÎ†ÄÏùÑ Îïå Î≥¥Ïó¨Ïßà ÏïàÎÇ¥ ÎÇ¥Ïö©ÏùÑ ÏûëÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî..." rows="4" required></textarea>
                            </div>
                        </div>

                        <!-- DCA ÏÑ§Ï†ï ÏÑπÏÖò -->
                        <div class="dao-form-section">
                            <h4><i class="fas fa-tasks"></i> ÏßÄÏ†ïÍ∏∞Ïó¨ÌôúÎèô (DCA) ÏÑ§Ï†ï</h4>
                            <div class="dca-setup-area">
                                <div class="dca-list" id="newDAODCAList">
                                    <!-- DCA Ìï≠Î™©Îì§Ïù¥ ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                                </div>
                                <button type="button" class="btn-secondary add-dca-btn" onclick="window.dapp.addNewDAODCA()">
                                    <i class="fas fa-plus"></i> DCA Ï∂îÍ∞Ä
                                </button>
                            </div>
                        </div>

                        <!-- Í∏∞Ïó¨ÌïòÎü¨Í∞ÄÍ∏∞ ÏÑ§Ï†ï ÏÑπÏÖò -->
                        <div class="dao-form-section">
                            <h4><i class="fas fa-rocket"></i> Í∏∞Ïó¨ÌïòÎü¨Í∞ÄÍ∏∞ ÏÑ§Ï†ï</h4>
                            <div class="contribution-setup">
                                <div class="contribution-options-list" id="contributionOptionsList">
                                    <!-- Í∏∞Ïó¨ ÏòµÏÖòÎì§Ïù¥ ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                                </div>
                                <button type="button" class="btn-secondary add-contribution-btn" onclick="window.dapp.addContributionOption()">
                                    <i class="fas fa-plus"></i> Í∏∞Ïó¨ÌïòÎü¨Í∞ÄÍ∏∞ ÏòµÏÖò Ï∂îÍ∞Ä
                                </button>
                                <div class="form-help">
                                    <i class="fas fa-info-circle"></i>
                                    DevDAOÏ≤òÎüº Ïó¨Îü¨ Í∞úÏùò Í∏∞Ïó¨ÌïòÎü¨Í∞ÄÍ∏∞ Î≤ÑÌäºÏùÑ ÏÑ§Ï†ïÌï† Ïàò ÏûàÏäµÎãàÎã§. (Ïòà: GitHub Ïó∞Îèô, Í∏∞Ïó¨ Í∞ÄÏù¥Îìú Îì±)
                                </div>
                            </div>
                        </div>

                        <!-- Ïù¥ÎãàÏÖú OP ÏÑ§Ï†ï ÏÑπÏÖò -->
                        <div class="dao-form-section">
                            <h4><i class="fas fa-crown"></i> Ïù¥ÎãàÏÖú OP ÏÑ§Ï†ï</h4>
                            <div class="form-group">
                                <label for="initialOPAddress">Ïù¥ÎãàÏÖú OP ÌÜµÏã†Ï£ºÏÜå</label>
                                <input type="text" id="initialOPAddress" placeholder="OPÍ∞Ä Îê† ÏÇ¨Ïö©ÏûêÏùò ÌÜµÏã†Ï£ºÏÜå (DID)Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
                                <small class="form-help">
                                    <i class="fas fa-info-circle"></i>
                                    Ïù¥ÎãàÏÖú OPÏóêÍ≤åÎäî DAO ÏÉùÏÑ±Í≥º ÎèôÏãúÏóê Ìï¥Îãπ DAOÏùò Í¥ÄÎ¶¨ Í∂åÌïúÏù¥ Î∂ÄÏó¨Îê©ÎãàÎã§.
                                </small>
                            </div>
                        </div>

                        <!-- Ï≤®Î∂ÄÌååÏùº ÏÑπÏÖò -->
                        <div class="dao-form-section">
                            <h4><i class="fas fa-paperclip"></i> Ï≤®Î∂ÄÌååÏùº</h4>
                            <div class="form-group">
                                <label for="daoAttachments">Ï≤®Î∂ÄÌååÏùº</label>
                                <div class="file-upload-area" onclick="document.getElementById('daoFileInput').click()">
                                    <div class="file-upload-content">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>ÌÅ¥Î¶≠ÌïòÏó¨ ÌååÏùºÏùÑ ÏÑ†ÌÉùÌïòÍ±∞ÎÇò ÎìúÎûòÍ∑∏ÌïòÏó¨ ÏóÖÎ°úÎìúÌïòÏÑ∏Ïöî</p>
                                        <small>ÏßÄÏõê ÌòïÏãù: PDF, DOC, DOCX, TXT, JPG, PNG (ÏµúÎåÄ 10MB)</small>
                                    </div>
                                    <input type="file" id="daoFileInput" multiple accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png" style="display: none;" onchange="window.dapp.handleDAOFileUpload(this)">
                                </div>
                                <div class="uploaded-files-list" id="daoUploadedFiles"></div>
                            </div>
                        </div>

                        <!-- DAOÏÉùÏÑ±Ï†úÏïà ÏàòÏàòÎ£å Ï†ïÎ≥¥ -->
                        <div class="proposal-fee-info">
                            <div class="fee-notice">
                                <i class="fas fa-info-circle"></i>
                                <span>Ï†úÏïà ÏàòÏàòÎ£å: <strong>0.05 B</strong> (DAOÏÉùÏÑ±Ï†úÏïà)</span>
                            </div>

                        </div>

                        <!-- DAOÏÉùÏÑ±Ï†úÏïà ÏöîÍµ¨ÏÇ¨Ìï≠ -->
                        <div class="proposal-requirements">
                            <h4>DAOÏÉùÏÑ±Ï†úÏïà ÏöîÍµ¨ÏÇ¨Ìï≠</h4>
                            <ul>
                                <li>Ï†ÑÏ≤¥ Î∞±Ïïº ÌîÑÎ°úÌÜ†ÏΩú Íµ¨ÏÑ±ÏõêÏùò <strong>5%</strong>ÎßåÌÅºÏùò B-tokenÏù¥ Î™®Ïù¥Î©¥ Ìà¨Ìëú ÏßÑÏûÖ</li>
                                <li>1Îã¨ ÎÇ¥ Ìà¨Ìëú ÏßÑÏûÖ Ïã§Ìå®Ïãú Ï†úÏïà Î∞è Îã¥Î≥¥ ÏÜåÍ∞Å</li>
                                <li>Ìà¨Ìëú Ïãú Ï†ïÏ°±Ïàò <strong>50%</strong> ÌïÑÏöî</li>
                                <li>Ï∞¨ÏÑ± ÎπÑÏú® <strong>60%</strong> Ïù¥ÏÉÅ ÌïÑÏöî</li>
                                <li>Ìà¨Ìëú ÌÜµÍ≥ºÏãú Îã¥Î≥¥ Î∞òÌôò Î∞è DAO ÏÉùÏÑ±, Ïã§Ìå®Ïãú Îã¥Î≥¥ ÏÜåÍ∞Å</li>
                            </ul>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" onclick="window.dapp.closeCreateProposalModal()">Ï∑®ÏÜå</button>
                        <button type="submit" class="btn-primary">Ï†úÏïà Ï†úÏ∂ú</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- DAO Ïª®ÏÜåÏãúÏóÑ Î™®Îã¨ -->
    <div id="daoConsortiumModal" class="modal">
        <div class="modal-content consortium-modal">
            <div class="modal-header">
                <h3 id="consortiumTitle"><i class="fas fa-building"></i> DAO Ïª®ÏÜåÏãúÏóÑ</h3>
                <button class="modal-close" onclick="window.dapp.closeConsortiumModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="consortium-container">
                    <!-- Ïª®ÏÜåÏãúÏóÑ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
                    <div class="consortium-nav">
                        <button class="consortium-tab active" data-consortium-tab="treasury">
                            <i class="fas fa-vault"></i> DAO Í∏àÍ≥†
                        </button>
                        <button class="consortium-tab" data-consortium-tab="announcements">
                            <i class="fas fa-bullhorn"></i> Í≥µÏßÄ
                        </button>
                        <button class="consortium-tab" data-consortium-tab="community">
                            <i class="fas fa-comments"></i> Ïª§ÎÆ§ÎãàÌã∞
                        </button>
                    </div>

                    <!-- Ïª®ÏÜåÏãúÏóÑ ÏΩòÌÖêÏ∏† -->
                    <div class="consortium-content">
                        <!-- DAO Í∏àÍ≥† ÌÉ≠ -->
                        <div id="consortium-treasury" class="consortium-tab-content active">
                            <div class="treasury-overview">
                                <div class="treasury-card">
                                    <h4><i class="fas fa-vault"></i> Í∏àÍ≥† ÌòÑÌô©</h4>
                                    <div class="treasury-balance">
                                        <div class="balance-item">
                                            <span class="balance-label">Ï¥ù Î≥¥Ïú†Îüâ</span>
                                            <span class="balance-value" id="treasuryBalance">0 B</span>
                                        </div>
                                        <div class="balance-item">
                                            <span class="balance-label">Ïù¥Î≤à Îã¨ ÏàòÏûÖ</span>
                                            <span class="balance-value" id="treasuryIncome">0 B</span>
                                        </div>
                                    </div>
                                    <div class="treasury-actions">
                                        <button class="btn-support dao-sponsor-btn" onclick="window.dapp.showDAOSponsorModal()">
                                            <i class="fas fa-heart"></i> DAO Í∏àÍ≥† ÌõÑÏõêÌïòÍ∏∞
                                        </button>
                                    </div>
                                </div>
                                <div class="treasury-usage">
                                    <h4><i class="fas fa-chart-pie"></i> ÏÇ¨Ïö© ÎÇ¥Ïó≠</h4>
                                    <div class="usage-list" id="treasuryUsage">
                                        <!-- ÏÇ¨Ïö© ÎÇ¥Ïó≠Ïù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Í≥µÏßÄ ÌÉ≠ -->
                        <div id="consortium-announcements" class="consortium-tab-content">
                            <div class="announcements-section">
                                <div class="announcements-header">
                                    <h4><i class="fas fa-bullhorn"></i> DAO Í≥µÏßÄÏÇ¨Ìï≠</h4>
                                    <div class="announcements-header-actions">
                                        <div class="announcement-types">
                                            <span class="type-indicator rejected">Í±∞Î∂ÄÎêú Ï†úÏïà</span>
                                            <span class="type-indicator final-approved">ÏµúÏ¢Ö ÏäπÏù∏</span>
                                            <span class="type-indicator final-rejected">ÏµúÏ¢Ö Í±∞Î∂Ä</span>
                                        </div>
                                        <div class="announcements-actions">
                                            <button class="op-announcement-btn protocol-overview-btn" onclick="window.dapp.showCreateAnnouncementModal()" style="display: none;">
                                                <i class="fas fa-plus"></i>
                                                Í≥µÏßÄ ÏûëÏÑ±
                                            </button>
                                            
                                </div>
                                    </div>
                                </div>
                                <div class="dao-announcements" id="daoAnnouncements">
                                    <!-- DAO Í≥µÏßÄÏÇ¨Ìï≠Îì§Ïù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                                </div>
                            </div>
                        </div>



                        <!-- Ïª§ÎÆ§ÎãàÌã∞ ÌÉ≠ -->
                        <div id="consortium-community" class="consortium-tab-content">
                            <div class="community-section">
                                <div class="community-header">
                                    <h4><i class="fas fa-comments"></i> Ïª§ÎÆ§ÎãàÌã∞</h4>
                                    <div class="community-actions">
                                        <button class="btn-secondary community-filter-btn" onclick="window.dapp.toggleMyPosts()" id="myPostsBtn">
                                            <i class="fas fa-user-edit"></i> ÎÇòÏùò Í∏Ä
                                        </button>
                                    <button class="btn-primary" onclick="window.dapp.createCommunityPost()">
                                        <i class="fas fa-plus"></i> Í∏Ä ÏûëÏÑ±
                                    </button>
                                    </div>
                                </div>
                                <div class="community-posts" id="communityPosts">
                                    <!-- Ïª§ÎÆ§ÎãàÌã∞ Í≤åÏãúÍ∏ÄÎì§Ïù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú Î™®Îã¨ -->
    <div id="profilePhotoModal" class="modal">
        <div class="modal-content profile-photo-modal">
            <div class="modal-header">
                <h3><i class="fas fa-camera"></i> ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ ÏÑ§Ï†ï</h3>
                <button class="modal-close" onclick="window.dapp.closeProfilePhotoModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="profile-photo-upload">
                    <div class="current-photo-preview">
                        <div class="photo-preview" id="photoPreview">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                    
                    <div class="upload-options">
                        <input type="file" id="photoInput" accept="image/*" style="display: none;" onchange="window.dapp.handlePhotoSelect(event)">
                        
                        <button class="btn-primary upload-btn" onclick="document.getElementById('photoInput').click()">
                            <i class="fas fa-upload"></i> ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú
                        </button>
                        
                        <button class="btn-secondary reset-btn" onclick="window.dapp.resetProfilePhoto()">
                            <i class="fas fa-undo"></i> Í∏∞Î≥∏ ÏïÑÎ∞îÌÉÄÎ°ú Î¶¨ÏÖã
                        </button>
                    </div>
                    
                    <div class="photo-requirements">
                        <h4>ÏÇ¨ÏßÑ ÏöîÍµ¨ÏÇ¨Ìï≠</h4>
                        <ul>
                            <li>ÏµúÎåÄ ÌååÏùº ÌÅ¨Í∏∞: 5MB</li>
                            <li>ÏßÄÏõê ÌòïÏãù: JPG, PNG, GIF</li>
                            <li>Í∂åÏû• ÌÅ¨Í∏∞: 500x500px Ïù¥ÏÉÅ</li>
                            <li>Ï†ïÏÇ¨Í∞ÅÌòï ÎπÑÏú® Í∂åÏû•</li>
                        </ul>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="window.dapp.closeProfilePhotoModal()">Ï∑®ÏÜå</button>
                    <button type="button" class="btn-primary" onclick="window.dapp.saveProfilePhoto()" id="savePhotoBtn" disabled>Ï†ÄÏû•</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Í≥µÍ∞ú Ï±ÑÌåÖÎ∞© ÏÉùÏÑ± Î™®Îã¨ -->
    <div id="createPublicChatModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-globe"></i> Í≥µÍ∞ú Ï±ÑÌåÖÎ∞© ÎßåÎì§Í∏∞</h3>
                <button class="modal-close" onclick="window.dapp.closeCreatePublicChatModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="createPublicChatForm" onsubmit="window.dapp.handleCreatePublicChat(event)">
                    <div class="form-group">
                        <label for="publicChatName">Ï±ÑÌåÖÎ∞© Ïù¥Î¶Ñ</label>
                        <input type="text" id="publicChatName" name="name" required 
                               placeholder="Ï±ÑÌåÖÎ∞© Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" maxlength="50">
                    </div>
                    

                    
                    <div class="form-group">
                        <label for="publicChatDescription">ÏÑ§Î™Ö</label>
                        <textarea id="publicChatDescription" name="description" rows="4" 
                                  placeholder="Ï±ÑÌåÖÎ∞© ÏÑ§Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (ÏÑ†ÌÉùÏÇ¨Ìï≠)" maxlength="200"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="publicChatMaxMembers">ÏµúÎåÄ Ïù∏Ïõê</label>
                        <input type="number" id="publicChatMaxMembers" name="maxMembers" 
                               min="10" max="1000" value="100" required>
                        <small>10Î™Ö ~ 1000Î™ÖÍπåÏßÄ ÏÑ§Ï†ï Í∞ÄÎä•</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="publicChatTags">ÌÉúÍ∑∏</label>
                        <input type="text" id="publicChatTags" name="tags" 
                               placeholder="#Î∞±Ïïº #Í∞úÎ∞ú #Ïª§ÎÆ§ÎãàÌã∞ (ÏâºÌëúÎ°ú Íµ¨Î∂Ñ)">
                        <small>Í≤ÄÏÉâÏóê ÎèÑÏõÄÏù¥ ÎêòÎäî ÌÉúÍ∑∏Î•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî</small>
                    </div>
                    
                    <div class="public-chat-fee-info">
                        <div class="fee-notice">
                            <i class="fas fa-info-circle"></i>
                            <span>Ï±ÑÌåÖÎ∞© ÏÉùÏÑ± ÏàòÏàòÎ£å: <strong>0.01 B</strong></span>
                        </div>
                        <div class="fee-breakdown">
                            <small>ÎÑ§Ìä∏ÏõåÌÅ¨ Ïú†ÏßÄÎπÑÏö©ÏúºÎ°ú ÏÇ¨Ïö©Îê©ÎãàÎã§</small>
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" onclick="window.dapp.closeCreatePublicChatModal()">Ï∑®ÏÜå</button>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-plus"></i>
                            Ï±ÑÌåÖÎ∞© ÎßåÎì§Í∏∞
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- OP Í≥µÏßÄ ÏûëÏÑ± Î™®Îã¨ -->
    <div id="createAnnouncementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-bullhorn"></i> Í≥µÏßÄÏÇ¨Ìï≠ ÏûëÏÑ±</h3>
                <button class="modal-close" onclick="window.dapp.closeCreateAnnouncementModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="createAnnouncementForm" onsubmit="window.dapp.handleCreateAnnouncement(event)">
                    <div class="form-group">
                        <label for="announcementTitle">Ï†úÎ™©</label>
                        <input type="text" id="announcementTitle" name="title" required 
                               placeholder="Í≥µÏßÄÏÇ¨Ìï≠ Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                    </div>
                    
                    <div class="form-group">
                        <label for="announcementType">Í≥µÏßÄ Ïú†Ìòï</label>
                        <select id="announcementType" name="type" required>
                            <option value="">Ïú†ÌòïÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                            <option value="general">ÏùºÎ∞ò Í≥µÏßÄ</option>
                            <option value="important">Ï§ëÏöî Í≥µÏßÄ</option>
                            <option value="event">Ïù¥Î≤§Ìä∏ Í≥µÏßÄ</option>
                            <option value="maintenance">Ï†êÍ≤Ä Í≥µÏßÄ</option>
                            <option value="policy">Ï†ïÏ±Ö Î≥ÄÍ≤Ω</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="announcementContent">ÎÇ¥Ïö©</label>
                        <textarea id="announcementContent" name="content" required rows="6" 
                                  placeholder="Í≥µÏßÄÏÇ¨Ìï≠ ÎÇ¥Ïö©ÏùÑ ÏûëÏÑ±ÌïòÏÑ∏Ïöî"></textarea>
                    </div>
                    
                    <div class="posting-fee-info">
                        <div class="fee-notice">
                            <i class="fas fa-info-circle"></i>
                            <span>Í≥µÏßÄ ÏàòÏàòÎ£å: <strong>0.001 B</strong></span>
                        </div>
                        <div class="fee-breakdown">
                            <small>Î∏îÎ°ùÏ≤¥Ïù∏ Í∏∞Î°ù Î∞è ÎÑ§Ìä∏ÏõåÌÅ¨ Ï†ÑÌåå ÎπÑÏö©ÏûÖÎãàÎã§</small>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="announcementPinned" name="pinned">
                            ÏÉÅÎã® Í≥†Ï†ï
                        </label>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" onclick="window.dapp.closeCreateAnnouncementModal()">Ï∑®ÏÜå</button>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-bullhorn"></i>
                            Í≥µÏßÄ Í≤åÏãú
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ÌôòÍ≤Ω ÏÑ§Ï†ï -->
    <script src="config.js"></script>
    
    <!-- Î©îÏù∏ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò -->
    <script src="app.js"></script>
    <script>
        // ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Í¥ÄÎ¶¨ Ïä§ÌÅ¨Î¶ΩÌä∏
        
        // DApp Î°úÎìú ÏôÑÎ£å ÌõÑ ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Î©îÏÑúÎìú Ï∂îÍ∞Ä
        document.addEventListener('DOMContentLoaded', function() {
            
            // DAppÏóê ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Î©îÏÑúÎìú Ï∂îÍ∞Ä
            if (typeof window.dapp !== 'undefined') {
                
                // ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Î™®Îã¨ Ïó¥Í∏∞
                window.dapp.openProfilePhotoModal = function() {
                    const modal = document.getElementById('profilePhotoModal');
                    const photoPreview = document.getElementById('photoPreview');
                    const saveBtn = document.getElementById('savePhotoBtn');
                    
                    // ÌòÑÏû¨ ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Î°úÎìú
                    this.loadCurrentPhoto(photoPreview);
                    
                    // Ï†ÄÏû• Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
                    saveBtn.disabled = true;
                    
                    modal.classList.add('active');
                };

                // ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Î™®Îã¨ Îã´Í∏∞
                window.dapp.closeProfilePhotoModal = function() {
                    const modal = document.getElementById('profilePhotoModal');
                    modal.classList.remove('active');
                    
                    // ÏÑ†ÌÉùÎêú ÏÇ¨ÏßÑ Ï¥àÍ∏∞Ìôî
                    this.selectedPhoto = null;
                    const photoInput = document.getElementById('photoInput');
                    if (photoInput) photoInput.value = '';
                };

                // ÌòÑÏû¨ ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Î°úÎìú
                window.dapp.loadCurrentPhoto = function(previewElement) {
                    if (this.currentUser && this.currentUser.profilePhoto) {
                        previewElement.innerHTML = '<img src="' + this.currentUser.profilePhoto + '" alt="ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ">';
                    } else {
                        // Í∏∞Î≥∏ ÏïÑÎ∞îÌÉÄ ÌëúÏãú
                        const userName = this.currentUser?.name || 'ÎØ∏ÏÑ§Ï†ï';
                        if (userName !== 'ÎØ∏ÏÑ§Ï†ï') {
                            previewElement.innerHTML = '';
                            previewElement.textContent = userName.charAt(0).toUpperCase();
                        } else {
                            previewElement.innerHTML = '<i class="fas fa-user"></i>';
                        }
                    }
                };

                // ÏÇ¨ÏßÑ ÏÑ†ÌÉù Ï≤òÎ¶¨
                window.dapp.handlePhotoSelect = function(event) {
                    const file = event.target.files[0];
                    if (!file) return;

                    // ÌååÏùº ÌÅ¨Í∏∞ Í≤ÄÏ¶ù (5MB)
                    if (file.size > 5 * 1024 * 1024) {
                        this.showErrorMessage('ÌååÏùº ÌÅ¨Í∏∞Îäî 5MBÎ•º Ï¥àÍ≥ºÌï† Ïàò ÏóÜÏäµÎãàÎã§.');
                        return;
                    }

                    // ÌååÏùº ÌòïÏãù Í≤ÄÏ¶ù
                    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
                    if (!allowedTypes.includes(file.type)) {
                        this.showErrorMessage('JPG, PNG, GIF ÌòïÏãùÎßå ÏßÄÏõêÎê©ÎãàÎã§.');
                        return;
                    }

                    // ÌååÏùº ÏùΩÍ∏∞
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        this.selectedPhoto = e.target.result;
                        
                        // ÎØ∏Î¶¨Î≥¥Í∏∞ ÏóÖÎç∞Ïù¥Ìä∏
                        const photoPreview = document.getElementById('photoPreview');
                        photoPreview.innerHTML = '<img src="' + this.selectedPhoto + '" alt="ÏÑ†ÌÉùÎêú ÏÇ¨ÏßÑ">';
                        
                        // Ï†ÄÏû• Î≤ÑÌäº ÌôúÏÑ±Ìôî
                        const saveBtn = document.getElementById('savePhotoBtn');
                        if (saveBtn) saveBtn.disabled = false;
                    };
                    reader.readAsDataURL(file);
                };

                // ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Î¶¨ÏÖã
                window.dapp.resetProfilePhoto = function() {
                    const photoPreview = document.getElementById('photoPreview');
                    
                    // Í∏∞Î≥∏ ÏïÑÎ∞îÌÉÄÎ°ú Î¶¨ÏÖã
                    if (this.currentUser && this.currentUser.name && this.currentUser.name !== 'ÎØ∏ÏÑ§Ï†ï') {
                        photoPreview.innerHTML = '';
                        photoPreview.textContent = this.currentUser.name.charAt(0).toUpperCase();
                    } else {
                        photoPreview.innerHTML = '<i class="fas fa-user"></i>';
                    }
                    
                    this.selectedPhoto = 'reset';
                    const saveBtn = document.getElementById('savePhotoBtn');
                    if (saveBtn) saveBtn.disabled = false;
                };

                // ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Ï†ÄÏû•
                window.dapp.saveProfilePhoto = function() {
                    try {
                        if (!this.currentUser) {
                            this.showErrorMessage('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
                            return;
                        }

                        // ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
                        if (this.selectedPhoto === 'reset') {
                            this.currentUser.profilePhoto = null;
                        } else if (this.selectedPhoto) {
                            this.currentUser.profilePhoto = this.selectedPhoto;
                        }

                        // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê Ï†ÄÏû•
                        localStorage.setItem('baekya_auth', JSON.stringify(this.currentUser));

                        // UI ÏóÖÎç∞Ïù¥Ìä∏
                        this.updateProfilePhotoInUI();

                        // ÏÑ±Í≥µ Î©îÏãúÏßÄ
                        this.showSuccessMessage('ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑÏù¥ ÏóÖÎç∞Ïù¥Ìä∏ÎêòÏóàÏäµÎãàÎã§.');

                        // Î™®Îã¨ Îã´Í∏∞
                        this.closeProfilePhotoModal();

                    } catch (error) {
                        console.error('ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Ï†ÄÏû• Ïã§Ìå®:', error);
                        this.showErrorMessage('ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
                    }
                };

                // UIÏóêÏÑú ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ ÏóÖÎç∞Ïù¥Ìä∏
                window.dapp.updateProfilePhotoInUI = function() {
                    const profilePhoto = document.getElementById('profilePhoto');
                    const mobileAvatar = document.getElementById('mobile-profile-avatar');

                    if (this.currentUser && this.currentUser.profilePhoto) {
                        // ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑÏù¥ ÏûàÎäî Í≤ΩÏö∞
                        if (profilePhoto) {
                            profilePhoto.innerHTML = '<img src="' + this.currentUser.profilePhoto + '" alt="ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ">';
                        }
                        if (mobileAvatar) {
                            mobileAvatar.innerHTML = '<img src="' + this.currentUser.profilePhoto + '" alt="ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ">';
                        }
                    } else {
                        // Í∏∞Î≥∏ ÏïÑÎ∞îÌÉÄ ÌëúÏãú
                        const userName = this.currentUser?.name || 'ÎØ∏ÏÑ§Ï†ï';
                        const displayText = userName !== 'ÎØ∏ÏÑ§Ï†ï' ? userName.charAt(0).toUpperCase() : 'U';
                        
                        if (profilePhoto) {
                            if (userName !== 'ÎØ∏ÏÑ§Ï†ï') {
                                profilePhoto.innerHTML = '';
                                profilePhoto.textContent = displayText;
                            } else {
                                profilePhoto.innerHTML = '<i class="fas fa-user"></i>';
                            }
                        }
                        if (mobileAvatar) {
                            mobileAvatar.textContent = displayText;
                        }
                    }
                };

                // ÏóêÎü¨ Î©îÏãúÏßÄ ÌëúÏãú (Í∏∞Ï°¥Ïóê ÏóÜÎäî Í≤ΩÏö∞ÏóêÎßå)
                if (!window.dapp.showErrorMessage) {
                    window.dapp.showErrorMessage = function(message) {
                        // Í∏∞Ï°¥ toastÍ∞Ä ÏûàÎã§Î©¥ Ï†úÍ±∞
                        const existingToast = document.querySelector('.toast.error');
                        if (existingToast) {
                            existingToast.remove();
                        }

                        const toast = document.createElement('div');
                        toast.className = 'toast error';
                        toast.innerHTML = '<i class="fas fa-exclamation-circle"></i><span>' + message + '</span>';
                        
                        // ÏóêÎü¨ Ïä§ÌÉÄÏùº Ï∂îÍ∞Ä
                        toast.style.borderLeftColor = '#ef4444';
                        
                        document.body.appendChild(toast);
                        
                        setTimeout(function() { toast.classList.add('show'); }, 100);
                        setTimeout(function() {
                            toast.classList.remove('show');
                            setTimeout(function() {
                                if (document.body.contains(toast)) {
                                    document.body.removeChild(toast);
                                }
                            }, 300);
                        }, 3000);
                    };
                }

                // Í∏∞Ï°¥ updateUserProfile Î©îÏÑúÎìú ÌôïÏû•
                const originalUpdateUserProfile = window.dapp.updateUserProfile.bind(window.dapp);
                window.dapp.updateUserProfile = function() {
                    // Í∏∞Ï°¥ ÌîÑÎ°úÌïÑ ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìñâ
                    originalUpdateUserProfile();
                    
                    // ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ UI ÏóÖÎç∞Ïù¥Ìä∏
                    this.updateProfilePhotoInUI();
                    
                    // ÌÜ†ÌÅ∞ Ïï°ÏÖò Î≤ÑÌäº ÏóÖÎç∞Ïù¥Ìä∏
                    this.updateTokenActionButtons();
                };

                // Í∏∞Ï°¥ updateMobileProfileHeader Î©îÏÑúÎìú ÌôïÏû•
                const originalUpdateMobileProfileHeader = window.dapp.updateMobileProfileHeader.bind(window.dapp);
                window.dapp.updateMobileProfileHeader = function() {
                    // Í∏∞Ï°¥ Î™®Î∞îÏùº Ìó§Îçî ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìñâ
                    originalUpdateMobileProfileHeader();
                    
                    // ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑÏù¥ ÏûàÏúºÎ©¥ Ï†ÅÏö©
                    const mobileAvatar = document.getElementById('mobile-profile-avatar');
                    if (mobileAvatar && this.currentUser && this.currentUser.profilePhoto) {
                        mobileAvatar.innerHTML = '<img src="' + this.currentUser.profilePhoto + '" alt="ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ">';
                    }
                };

                // ÌÅ¥Î¶ΩÎ≥¥Îìú Î≥µÏÇ¨ Í∏∞Îä• Ï∂îÍ∞Ä
                window.dapp.copyToClipboard = function(elementId, addressType) {
                    const element = document.getElementById(elementId);
                    if (!element) return;
                    
                    const text = element.textContent.trim();
                    
                    // Î≥µÏÇ¨Ìï† ÎÇ¥Ïö©Ïù¥ ÏóÜÍ±∞ÎÇò Í∏∞Î≥∏Í∞íÏù∏ Í≤ΩÏö∞
                    if (!text || text === 'Ïó∞Í≤∞ÎêòÏßÄ ÏïäÏùå' || text === 'ÎØ∏Ìï†Îãπ') {
                        this.showErrorMessage(addressType + 'Í∞Ä ÏÑ§Ï†ïÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.');
                        return;
                    }
                    
                    // ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨
                    if (navigator.clipboard && window.isSecureContext) {
                        // ÏµúÏã† Î∏åÎùºÏö∞Ï†ÄÏùò Clipboard API ÏÇ¨Ïö©
                        navigator.clipboard.writeText(text).then(() => {
                            this.showCopySuccess(addressType);
                            this.animateCopyButton(elementId);
                        }).catch(err => {
                            this.fallbackCopyTextToClipboard(text, addressType);
                        });
                    } else {
                        // Ìè¥Î∞± Î∞©Î≤ï ÏÇ¨Ïö©
                        this.fallbackCopyTextToClipboard(text, addressType);
                    }
                };

                // Ìè¥Î∞± Î≥µÏÇ¨ Î∞©Î≤ï
                window.dapp.fallbackCopyTextToClipboard = function(text, addressType) {
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    textArea.style.top = '0';
                    textArea.style.left = '0';
                    textArea.style.position = 'fixed';
                    textArea.style.opacity = '0';
                    
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    
                    try {
                        const successful = document.execCommand('copy');
                        if (successful) {
                            this.showCopySuccess(addressType);
                            this.animateCopyButton(elementId);
                        } else {
                            this.showErrorMessage('Î≥µÏÇ¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
                        }
                    } catch (err) {
                        this.showErrorMessage('Î≥µÏÇ¨ Í∏∞Îä•ÏùÑ ÏßÄÏõêÌïòÏßÄ ÏïäÎäî Î∏åÎùºÏö∞Ï†ÄÏûÖÎãàÎã§.');
                    }
                    
                    document.body.removeChild(textArea);
                };

                // Î≥µÏÇ¨ ÏÑ±Í≥µ Î©îÏãúÏßÄ
                window.dapp.showCopySuccess = function(addressType) {
                    const toast = document.createElement('div');
                    toast.className = 'toast success';
                    toast.innerHTML = '<i class="fas fa-check-circle"></i><span>' + addressType + 'Í∞Ä ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§.</span>';
                    
                    document.body.appendChild(toast);
                    
                    setTimeout(function() { toast.classList.add('show'); }, 100);
                    setTimeout(function() {
                        toast.classList.remove('show');
                        setTimeout(function() {
                            if (document.body.contains(toast)) {
                                document.body.removeChild(toast);
                            }
                        }, 300);
                    }, 2000);
                };

                // Î≥µÏÇ¨ Î≤ÑÌäº Ïï†ÎãàÎ©îÏù¥ÏÖò
                window.dapp.animateCopyButton = function(elementId) {
                    // Ìï¥Îãπ Ï£ºÏÜåÏôÄ Ïó∞Í¥ÄÎêú Î≥µÏÇ¨ Î≤ÑÌäº Ï∞æÍ∏∞
                    const element = document.getElementById(elementId);
                    if (!element) return;
                    
                    const container = element.closest('.address-container');
                    if (!container) return;
                    
                    const copyBtn = container.querySelector('.copy-btn');
                    if (!copyBtn) return;
                    
                    // Î≥µÏÇ¨ ÏôÑÎ£å ÏÉÅÌÉúÎ°ú Î≥ÄÍ≤Ω
                    copyBtn.classList.add('copied');
                    const icon = copyBtn.querySelector('i');
                    const originalClass = icon.className;
                    icon.className = 'fas fa-check';
                    
                    // 2Ï¥à ÌõÑ ÏõêÎûò ÏÉÅÌÉúÎ°ú Î≥µÏõê
                    setTimeout(function() {
                        copyBtn.classList.remove('copied');
                        icon.className = originalClass;
                    }, 2000);
                };

                // ÌÜ†ÌÅ∞ Ï†ÑÏÜ° ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô
                window.dapp.goToTokenTransfer = function() {
                    // ÏßÄÍ∞ë ÌÉ≠ÏúºÎ°ú Ï†ÑÌôò
                    const walletTab = document.querySelector('[data-tab="wallet"]');
                    if (walletTab) {
                        walletTab.click();
                    }
                    
                    // Ïû†Ïãú ÌõÑ ÌÜ†ÌÅ∞ Ï†ÑÏÜ° Ïπ¥ÎìúÎ°ú Ïä§ÌÅ¨Î°§
                    setTimeout(function() {
                        const transactionCard = document.querySelector('.transaction-card');
                        if (transactionCard) {
                            transactionCard.scrollIntoView({ 
                                behavior: 'smooth',
                                block: 'center'
                            });
                            
                            // ÌÜ†ÌÅ∞ Ï†ÑÏÜ° Ïπ¥ÎìúÎ•º Í∞ïÏ°∞ÌïòÎäî Ïï†ÎãàÎ©îÏù¥ÏÖò
                            transactionCard.classList.add('highlight-animation');
                            setTimeout(function() {
                                transactionCard.classList.remove('highlight-animation');
                            }, 2000);
                        }
                    }, 300);
                };



                // ÌÜ†ÌÅ∞ Ïï°ÏÖò Î≤ÑÌäº ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
                window.dapp.updateTokenActionButtons = function() {
                    const bTokenTransferButton = document.getElementById('bTokenTransferButton');
                    
                    if (this.isAuthenticated && this.currentUser) {
                        if (bTokenTransferButton) {
                            bTokenTransferButton.style.display = 'inline-flex';
                        }
                    } else {
                        if (bTokenTransferButton) {
                            bTokenTransferButton.style.display = 'none';
                        }
                    }
                };

                // Ï£ºÏÜå Ïπ¥Îìú ÌÜ†Í∏Ä Í∏∞Îä• (PÌÜ†ÌÅ∞ ÌÜ†Í∏ÄÍ≥º ÎèôÏùº)
                window.dapp.toggleAddressCard = function() {
                    const cardContent = document.getElementById('addressCardContent');
                    const toggleIcon = document.getElementById('addressToggleIcon');
                    
                    if (cardContent.style.display === 'none') {
                        // Ïπ¥Îìú Ïó¥Í∏∞
                        cardContent.style.display = 'block';
                        cardContent.classList.remove('hiding');
                        cardContent.classList.add('showing');
                        toggleIcon.classList.remove('fa-chevron-down');
                        toggleIcon.classList.add('fa-chevron-up');
                        toggleIcon.classList.add('rotated');
                    } else {
                        // Ïπ¥Îìú Îã´Í∏∞
                        cardContent.classList.remove('showing');
                        cardContent.classList.add('hiding');
                        toggleIcon.classList.remove('fa-chevron-up');
                        toggleIcon.classList.add('fa-chevron-down');
                        toggleIcon.classList.remove('rotated');
                        
                        // Ïï†ÎãàÎ©îÏù¥ÏÖò ÏôÑÎ£å ÌõÑ Ïà®ÍπÄ
                        setTimeout(function() {
                            cardContent.style.display = 'none';
                            cardContent.classList.remove('hiding');
                        }, 300);
                    }
                };

                console.log('üì∏ ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Í∏∞Îä•Ïù¥ Î°úÎìúÎêòÏóàÏäµÎãàÎã§.');

                // Ï¥àÍ∏∞ Î°úÎìú Ïãú ÌÜ†ÌÅ∞ Î≤ÑÌäº ÏÉÅÌÉú ÌôïÏù∏
                setTimeout(function() {
                    if (window.dapp && window.dapp.updateTokenActionButtons) {
                        window.dapp.updateTokenActionButtons();
                    }
                }, 500);

                // ÌÉ≠ Î≥ÄÍ≤Ω Ïãú ÌÜ†ÌÅ∞ Î≤ÑÌäº ÏóÖÎç∞Ïù¥Ìä∏Î•º ÏúÑÌïú Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
                const tabButtons = document.querySelectorAll('[data-tab]');
                tabButtons.forEach(function(tabBtn) {
                    tabBtn.addEventListener('click', function() {
                        // ÌÉ≠ Î≥ÄÍ≤Ω ÌõÑ Ïû†Ïãú Í∏∞Îã§Î¶∞ Îã§Ïùå ÌÜ†ÌÅ∞ Î≤ÑÌäº ÏóÖÎç∞Ïù¥Ìä∏
                        setTimeout(function() {
                            if (window.dapp && window.dapp.updateTokenActionButtons) {
                                window.dapp.updateTokenActionButtons();
                            }
                        }, 100);
                    });
                });
            }
        });
    </script>

    <!-- ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Î≥¥Í∏∞ Î™®Îã¨ -->
    <div id="profileViewModal" class="profile-view-modal">
        <div class="profile-view-content">
            <div class="profile-view-header">
                <h3>Ïó∞ÎùΩÏ≤ò Ï†ïÎ≥¥</h3>
                <button class="profile-close-btn" onclick="window.dapp.closeProfileView()">&times;</button>
            </div>
            <div class="profile-view-body">
                <img id="profileViewImage" class="profile-view-image" src="" alt="ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ">
                <div class="profile-view-info">
                    <div class="profile-view-name" id="profileViewName"></div>
                    <!-- Ïò®ÎùºÏù∏ ÏÉÅÌÉú ÌëúÏãú Ï†úÍ±∞Îê® -->
                    <div class="profile-view-address">
                        <label>ÌÜµÏã† Ï£ºÏÜå</label>
                        <div class="profile-address-container">
                            <span id="profileViewAddress" class="profile-address"></span>
                            <button class="profile-copy-btn" onclick="window.dapp.copyProfileAddress()" title="Ï£ºÏÜå Î≥µÏÇ¨">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    <div class="profile-view-address" id="profileViewUsernameContainer" style="display: none;">
                        <label>ÏïÑÏù¥Îîî</label>
                        <div class="profile-address-container">
                            <span id="profileViewUsername" class="profile-address"></span>
                            <button class="profile-copy-btn" onclick="window.dapp.copyProfileUsername()" title="ÏïÑÏù¥Îîî Î≥µÏÇ¨">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Ïó∞ÎùΩÏ≤ò Ïï°ÏÖò Î≤ÑÌäºÎì§ -->
                    <div class="profile-actions">
                        <button class="profile-action-btn phone-btn" id="profilePhoneBtn" title="ÏùåÏÑ±ÌÜµÌôî">
                            <i class="fas fa-phone"></i>
                            <span>ÌÜµÌôî</span>
                        </button>
                        <button class="profile-action-btn video-btn" id="profileVideoBtn" title="ÏòÅÏÉÅÌÜµÌôî">
                            <i class="fas fa-video"></i>
                            <span>ÏòÅÏÉÅ</span>
                        </button>
                        <button class="profile-action-btn chat-btn" id="profileChatBtn" title="Ï±ÑÌåÖÌïòÍ∏∞">
                            <i class="fas fa-comment"></i>
                            <span>Ï±ÑÌåÖ</span>
                        </button>
                    </div>
                    
                    <!-- Ïó∞ÎùΩÏ≤ò Í¥ÄÎ¶¨ Î≤ÑÌäºÎì§ -->
                    <div class="profile-management-actions">
                        <button class="profile-management-btn block-btn" id="profileBlockBtn" title="ÏÇ¨Ïö©Ïûê Ï∞®Îã®">
                            <i class="fas fa-ban"></i>
                            <span>Ï∞®Îã®</span>
                        </button>
                        <button class="profile-management-btn delete-btn" id="profileDeleteBtn" title="Ïó∞ÎùΩÏ≤ò ÏÇ≠Ï†ú">
                            <i class="fas fa-trash"></i>
                            <span>ÏÇ≠Ï†ú</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- QR ÏΩîÎìú ÎùºÏù¥Î∏åÎü¨Î¶¨ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    
    <script src="app.js"></script>
    <script src="app-additions.js"></script>
    <script src="ime-fix.js"></script>
    
    <!-- ÏÑúÎπÑÏä§ ÏõåÏª§ Îì±Î°ù -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ÏÑúÎπÑÏä§ ÏõåÏª§Í∞Ä Îì±Î°ùÎêòÏóàÏäµÎãàÎã§:', registration);
                    })
                    .catch(error => {
                        console.log('ÏÑúÎπÑÏä§ ÏõåÏª§ Îì±Î°ù Ïã§Ìå®:', error);
                    });
            });
        }
    </script>

    <!-- ÌîÑÎ°úÌïÑ ÏÑ§Ï†ï Î™®Îã¨ -->
    <div id="profileSettingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-cog"></i> ÌîÑÎ°úÌïÑ ÏÑ§Ï†ï</h3>
                <button class="modal-close" onclick="window.dapp.closeProfileSettingsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <!-- ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ ÏÑ§Ï†ï ÏÑπÏÖò -->
                <div class="profile-photo-upload">
                    <h4><i class="fas fa-camera"></i> ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ</h4>
                    <div class="current-photo-preview">
                        <div class="photo-preview" id="photoPreview">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                    <div class="upload-options">
                        <input type="file" id="photoInput" accept="image/*" onchange="window.dapp.handlePhotoSelect(event)" style="display: none;">
                        <button class="upload-btn" onclick="document.getElementById('photoInput').click()">
                            <i class="fas fa-upload"></i> ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú
                        </button>
                        <button class="reset-btn" onclick="window.dapp.resetProfilePhoto()">
                            <i class="fas fa-user"></i> Í∏∞Î≥∏ ÏïÑÎ∞îÌÉÄ
                        </button>
                    </div>
                    <div class="photo-requirements">
                        <h4>ÏÇ¨ÏßÑ ÏöîÍµ¨ÏÇ¨Ìï≠</h4>
                        <ul>
                            <li>ÏµúÎåÄ ÌååÏùº ÌÅ¨Í∏∞: 5MB</li>
                            <li>ÏßÄÏõê ÌòïÏãù: JPG, PNG, GIF</li>
                            <li>Í∂åÏû• ÌÅ¨Í∏∞: 200x200 ÌîΩÏÖÄ</li>
                        </ul>
                    </div>
                </div>

                <!-- Ïù¥Î¶Ñ Î≥ÄÍ≤Ω ÏÑπÏÖò -->
                <div class="name-change-section">
                    <h4><i class="fas fa-user-edit"></i> Ïù¥Î¶Ñ Î≥ÄÍ≤Ω</h4>
                    <div class="form-group">
                        <label for="nameChangeInput">ÏÉàÎ°úÏö¥ Ïù¥Î¶Ñ</label>
                        <input type="text" id="nameChangeInput" placeholder="ÌòÑÏû¨: ÎØ∏ÏÑ§Ï†ï" maxlength="20">
                        <div class="change-status" id="nameChangeStatus">
                            <span class="status-checking">ÏÉÅÌÉú ÌôïÏù∏ Ï§ë...</span>
                        </div>
                    </div>
                </div>

                <!-- ÏÉÅÌÉúÎ©îÏãúÏßÄ ÏÑ§Ï†ï ÏÑπÏÖò -->
                <div class="status-message-section">
                    <h4><i class="fas fa-comment-dots"></i> ÏÉÅÌÉúÎ©îÏãúÏßÄ</h4>
                    <div class="form-group">
                        <label for="statusMessageInput">ÏÉÅÌÉúÎ©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî</label>
                        <textarea id="statusMessageInput" placeholder="ÏßÄÍ∏à Í∏∞Î∂ÑÏù¥ÎÇò ÌïòÍ≥† ÏûàÎäî ÏùºÏùÑ ÏïåÎ†§Ï£ºÏÑ∏Ïöî (ÏµúÎåÄ 100Ïûê)" maxlength="100" rows="3"></textarea>
                        <div class="char-count">
                            <span id="statusCharCount">0</span>/100
                        </div>
                    </div>
                </div>

                <!-- Î≥¥Ïïà ÏÑ§Ï†ï ÏÑπÏÖò -->
                <div class="security-settings-section" style="margin-top: 30px; border-top: 1px solid var(--border-color); padding-top: 20px;">
                    <h4><i class="fas fa-shield-alt"></i> Î≥¥Ïïà ÏÑ§Ï†ï</h4>
                    <div class="security-actions">

                        <button class="btn-secondary security-btn" onclick="window.dapp.resetPassword()">
                            <i class="fas fa-key"></i> ÎπÑÎ∞ÄÎ≤àÌò∏ Ïû¨ÏÑ§Ï†ï
                        </button>
                        <button class="btn-danger security-btn" onclick="window.dapp.deleteAccount()" style="background-color: #991b1b; color: white; border: 1px solid #991b1b; padding: 0.75rem 1.5rem; border-radius: 8px; font-size: 1rem; font-weight: 500; display: flex; align-items: center; justify-content: center; gap: 0.5rem; width: 100%; margin-top: 1rem;">
                            <i class="fas fa-user-times"></i> Í≥ÑÏ†ï ÌÉàÌá¥
                        </button>
                        <button class="btn-danger security-btn logout-btn" onclick="window.dapp.confirmLogout()" style="background-color: #dc2626; color: white; border: 1px solid #dc2626; padding: 0.75rem 1.5rem; border-radius: 8px; font-size: 1rem; font-weight: 500; display: flex; align-items: center; justify-content: center; gap: 0.5rem; width: 100%; margin-top: 1rem;">
                            <i class="fas fa-sign-out-alt"></i> Î°úÍ∑∏ÏïÑÏõÉ
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-secondary" onclick="window.dapp.closeProfileSettingsModal()">Ï∑®ÏÜå</button>
                <button type="button" class="btn-primary" id="saveProfileBtn" onclick="window.dapp.saveProfileSettings()">
                    <i class="fas fa-save"></i> Ï†ÄÏû•
                </button>
            </div>
        </div>
    </div>

    <!-- Î∞±Ïïº ÎÑ§Ìä∏ÏõåÌÅ¨ ÏπúÍµ¨ Í≤ÄÏÉâ Î™®Îã¨ -->
    <div id="friendSearchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-search"></i> Î∞±Ïïº ÎÑ§Ìä∏ÏõåÌÅ¨ ÏπúÍµ¨ Í≤ÄÏÉâ</h3>
                <button class="modal-close" onclick="window.dapp.closeFriendSearchModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="network-search-section">
                    <p class="search-description">
                        <i class="fas fa-network-wired"></i>
                        Î∞±Ïïº ÎÑ§Ìä∏ÏõåÌÅ¨Ïóê Îì±Î°ùÎêú ÏÇ¨Ïö©ÏûêÏùò ÌÜµÏã†Ï£ºÏÜå ÎòêÎäî ÏïÑÏù¥ÎîîÎ•º Í≤ÄÏÉâÌïòÏó¨ ÏπúÍµ¨Î°ú Ï∂îÍ∞ÄÌï† Ïàò ÏûàÏäµÎãàÎã§.
                    </p>
                    
                    <div class="search-input-section">
                        <div class="modern-search-wrapper">
                            <div class="search-input-container">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" id="networkSearchInput" class="modern-search-input" placeholder="ÌÜµÏã†Ï£ºÏÜå ÎòêÎäî ÏïÑÏù¥ÎîîÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." onkeypress="if(event.key==='Enter') window.dapp.searchNetworkUsers()">
                                <button class="modern-search-btn" onclick="window.dapp.searchNetworkUsers()" title="Í≤ÄÏÉâ">
                            <i class="fas fa-search"></i>
                                    <span>Í≤ÄÏÉâ</span>
                            </button>
                            </div>
                        </div>
                        <div class="search-tips">
                            <small><i class="fas fa-info-circle"></i> Ïòà: 010-1234-5678 ÎòêÎäî user1234</small>
                        </div>
                    </div>
                </div>

                <div class="search-status" id="searchStatus" style="display: none;">
                    <div class="searching-indicator">
                        <i class="fas fa-spinner fa-spin"></i>
                        <span>Î∞±Ïïº ÎÑ§Ìä∏ÏõåÌÅ¨ÏóêÏÑú Í≤ÄÏÉâ Ï§ë...</span>
                    </div>
                </div>

                <div class="search-results-section" id="searchResultsSection" style="display: none;">
                    <h4><i class="fas fa-users"></i> Í≤ÄÏÉâ Í≤∞Í≥º</h4>
                    <div class="network-users-list" id="networkUsersList">
                        <!-- Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                    </div>
                </div>

                <div class="no-results" id="noResults" style="display: none;">
                    <i class="fas fa-user-slash"></i>
                    <h4>Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§</h4>
                    <p>ÏûÖÎ†•ÌïòÏã† ÌÜµÏã†Ï£ºÏÜåÎÇò ÎãâÎÑ§ÏûÑÏóê Ìï¥ÎãπÌïòÎäî ÏÇ¨Ïö©ÏûêÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.</p>
                    <small>Ï†ïÌôïÌïú Ï£ºÏÜåÎ•º ÏûÖÎ†•ÌñàÎäîÏßÄ ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî.</small>
                </div>
            </div>
        </div>
    </div>



</body>
</html> 