#!/usr/bin/env pwsh

<#
.SYNOPSIS
    λ°±μ•Ό ν”„λ΅ν† μ½ λ¨λ°”μΌ/κ²½λ‰ ν΄λΌμ΄μ–ΈνΈ μ„λ²„ μ‹μ‘

.DESCRIPTION
    λ©”μΈλ„· λ…Έλ“μ— μ—°κ²°ν•λ” κ²½λ‰ ν΄λΌμ΄μ–ΈνΈ μ„λ²„λ¥Ό μ‹μ‘ν•©λ‹λ‹¤.
    ν’€λ…Έλ“λ¥Ό μ‹¤ν–‰ν•μ§€ μ•κ³ λ„ λ°±μ•Ό ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

.EXAMPLE
    .\start-mobile.ps1
#>

Write-Host @"

π“± λ°±μ•Ό ν”„λ΅ν† μ½ κ²½λ‰ ν΄λΌμ΄μ–ΈνΈ μ‹μ‘
β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”
π ν’€λ…Έλ“ μ—†μ΄λ„ λ°±μ•Ό ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•  μ μλ” κ²½λ‰ ν΄λΌμ΄μ–ΈνΈ
π“ λ©”μΈλ„· λ…Έλ“λ“¤κ³Ό μλ™ μ—°κ²°λμ–΄ λ¨λ“  κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤
β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

"@ -ForegroundColor Cyan

# ν„μ¬ λ””λ ‰ν† λ¦¬ ν™•μΈ
$currentDir = Get-Location
Write-Host "π“‚ ν„μ¬ λ””λ ‰ν† λ¦¬: $currentDir" -ForegroundColor Green

# Node.js λ° npm μ„¤μΉ ν™•μΈ
Write-Host "π” μ‹μ¤ν… μ”κµ¬μ‚¬ν•­ ν™•μΈ μ¤‘..." -ForegroundColor Yellow

try {
    $nodeVersion = node --version
    Write-Host "β… Node.js λ²„μ „: $nodeVersion" -ForegroundColor Green
} catch {
    Write-Host "β Node.jsκ°€ μ„¤μΉλμ§€ μ•μ•μµλ‹λ‹¤. Node.jsλ¥Ό λ¨Όμ € μ„¤μΉν•μ„Έμ”." -ForegroundColor Red
    exit 1
}

try {
    $npmVersion = npm --version  
    Write-Host "β… npm λ²„μ „: $npmVersion" -ForegroundColor Green
} catch {
    Write-Host "β npmμ΄ μ„¤μΉλμ§€ μ•μ•μµλ‹λ‹¤." -ForegroundColor Red
    exit 1
}

# ν¨ν‚¤μ§€ μ„¤μΉ μƒνƒ ν™•μΈ
if (-not (Test-Path "node_modules")) {
    Write-Host "π“¦ μμ΅΄μ„± ν¨ν‚¤μ§€ μ„¤μΉ μ¤‘..." -ForegroundColor Yellow
    npm install
    if ($LASTEXITCODE -ne 0) {
        Write-Host "β ν¨ν‚¤μ§€ μ„¤μΉμ— μ‹¤ν¨ν–μµλ‹λ‹¤." -ForegroundColor Red
        exit 1
    }
}

Write-Host @"

π€ κ²½λ‰ ν΄λΌμ΄μ–ΈνΈ μ„λ²„ μ‹μ‘!
β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

π“± μ΄ μ„λ²„λ” λ©”μΈλ„· λ…Έλ“λ“¤κ³Ό μλ™μΌλ΅ μ—°κ²°λ©λ‹λ‹¤
π”— λ΅μ»¬μ— λ©”μΈλ„· λ…Έλ“κ°€ μμΌλ©΄ μ°μ„  μ—°κ²°λ©λ‹λ‹¤
π μ—†μΌλ©΄ λ‹¤λ¥Έ ν™μ„± λ…Έλ“λ“¤μ„ μ°Ύμ•„ μ—°κ²°ν•©λ‹λ‹¤

β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

"@ -ForegroundColor Green

# κ²½λ‰ ν΄λΌμ΄μ–ΈνΈ μ„λ²„ μ‹¤ν–‰
try {
    npm run mobile
} catch {
    Write-Host "β κ²½λ‰ ν΄λΌμ΄μ–ΈνΈ μ„λ²„ μ‹μ‘ μ¤‘ μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤: $($_.Exception.Message)" -ForegroundColor Red
    exit 1
}

Write-Host @"

π‰ λ°±μ•Ό ν”„λ΅ν† μ½ κ²½λ‰ ν΄λΌμ΄μ–ΈνΈκ°€ μ„±κ³µμ μΌλ΅ μ‹μ‘λμ—μµλ‹λ‹¤!

π’΅ λ©”μΈλ„· λ…Έλ“ μ—°κ²° λ°©λ²•:
   1. κ°™μ€ μ»΄ν“¨ν„°μ—μ„: .\start-mainnet.ps1 μ‹¤ν–‰
   2. λ‹¤λ¥Έ μ»΄ν“¨ν„°μ—μ„: λΈλΌμ°μ €μ—μ„ λ…Έλ“ μ£Όμ† μ¶”κ°€
   
π μ΄μ  ν’€λ…Έλ“ μ—†μ΄λ„ λ°±μ•Ό ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤!
β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

"@ -ForegroundColor Green 